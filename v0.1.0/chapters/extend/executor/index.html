<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

<meta property="og:title" content="Guideline When Adding New Executor" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://docs.jina.ai/chapters/extend/executor/" />
  
<meta property="og:site_name" content="Jina 0.1.0 Documentation" />
  
<meta property="og:description" content="New deep learning model? New indexing algorithm? When the existing executors/drivers do not fit your requirement, and you can not find a useful one from Jina Hub, you can simply extend Jina to what you need without even touching the Jina codebase. In this chapter, we will show you the guideline o..." />
  
<meta property="og:image" content="https://docs.jina.ai/_static/banner.png" />
  
<meta property="og:image:alt" content="Jina 0.1.0 Documentation" />
  
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@JinaAI_">
<meta name="twitter:creator" content="@JinaAI_">
<meta name="description" content="Build cross-modal and multi-modal applications on the cloud · Neural Search · Creative AI · Cloud Native · MLOps">
<meta property="og:description" content="Build cross-modal and multi-modal applications on the cloud · Neural Search · Creative AI · Cloud Native · MLOps">

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-48ZDWC8GT6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-48ZDWC8GT6');
</script>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    <link rel="index" title="Index" href="../../../genindex/" /><link rel="search" title="Search" href="../../../search/" /><link rel="next" title="Guideline When Adding New Driver" href="../driver/" /><link rel="prev" title="A Minimum Working Example" href="../mwu/" />
        <link rel="canonical" href="https://docs.jina.ai/chapters/extend/executor.html" />

    <link rel="shortcut icon" href="../../../_static/favicon.ico"/><meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>Guideline When Adding New Executor - Jina 3.10.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/main.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/docbot.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: #4d4d4d;
  --color-brand-primary: #009191;
  --color-brand-content: #009191;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
    <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
    <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
    <header class="mobile-header">
        <div class="header-left">
            <label class="nav-overlay-icon" for="__navigation">
                <div class="visually-hidden">Toggle site navigation sidebar</div>
                <i class="icon">
                    <svg>
                        <use href="#svg-menu"></use>
                    </svg>
                </i>
            </label>
        </div>
        <div class="header-center">
            <a href="../../../">
                <div class="brand">Jina 3.10.2 documentation</div>
            </a>
        </div>
        <div class="header-right">
            <div class="theme-toggle-container theme-toggle-header">
                <button class="theme-toggle">
                    <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
                    <svg class="theme-icon-when-auto">
                        <use href="#svg-sun-half"></use>
                    </svg>
                    <svg class="theme-icon-when-dark">
                        <use href="#svg-moon"></use>
                    </svg>
                    <svg class="theme-icon-when-light">
                        <use href="#svg-sun"></use>
                    </svg>
                </button>
            </div>
            <label class="toc-overlay-icon toc-header-icon" for="__toc">
                <div class="visually-hidden">Toggle table of contents sidebar</div>
                <i class="icon">
                    <svg>
                        <use href="#svg-toc"></use>
                    </svg>
                </i>
            </label>
        </div>
    </header>
    <aside class="sidebar-drawer">
        <div class="sidebar-container">
            
            <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../_static/logo-light.svg" alt="Light Logo" />
    <img class="sidebar-logo only-dark" src="../../../_static/logo-dark.svg" alt="Dark Logo" />
  </div>
  
  
</a>
<div class="sd-d-flex-row sd-align-major-spaced">
  <a class="github-button" href="https://github.com/jina-ai/jina" data-icon="octicon-star" data-show-count="true" aria-label="Star jina-ai/jina on GitHub" style="opacity: 0;">Star</a>
  
</div><form class="sidebar-search-container" method="get" action="../../../search/" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
    <p class="caption" role="heading"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install/via-pip/">Install Jina via <code class="docutils literal notranslate"><span class="pre">pip</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/via-docker/">Install Jina via Docker Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/on-rasp-linux/">Install Jina on Raspberry Pi and other Linux Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/upgrade/">Upgrade Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/autocomplete/">Autocomplete commands on Bash, Zsh and Fish</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../helloworld/main/">Jina “Hello, World!” 👋🌍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../101/.sphinx/">Jina 101: First Thing to Learn About Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../flow/README/">Using Flow API to Compose Your Jina Workflow</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../hub/main/">Using Jina Pod with Docker Container</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../hub/build-pod-image/">Build Your Pod into a Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hub/use-your-pod/">Use Your Pod Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hub/publish-your-pod-image/">Publish Your Pod Image to Jina Hub</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../remote/main/">Using Jina Pod Remotely</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../remote/run-remote-pod-console/">Creating a Remote Jina Pod from Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../remote/run-remote-pod-jina/">Creating a Remote Jina Pod via Jina Gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../remote/run-remote-pod-flow/">Creating a Remote Jina Pod via Flow API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../dashboard/main/">Using Dashboard to Monitor Logs and View Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli/exit/">Gracefully Exit Jina</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../cli/main/">Jina Command-Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-helloworld/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">hello-world</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-pod/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">pod</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-flow/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">flow</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-gateway/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">gateway</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-ping/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">ping</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-check/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">check</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-log/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">log</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-pea/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">pea</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-client/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">client</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../api/jina/">Jina Python API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.clients/">jina.clients</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.clients.python/">jina.clients.python</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.clients.python.grpc/">jina.clients.python.grpc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.clients.python.helper/">jina.clients.python.helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.clients.python.request/">jina.clients.python.request</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.drivers/">jina.drivers</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.control/">jina.drivers.control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.craft/">jina.drivers.craft</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.encode/">jina.drivers.encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.filter/">jina.drivers.filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.helper/">jina.drivers.helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.index/">jina.drivers.index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.prune/">jina.drivers.prune</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.reduce/">jina.drivers.reduce</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.score/">jina.drivers.score</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.search/">jina.drivers.search</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.executors/">jina.executors</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.executors.crafters/">jina.executors.crafters</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.executors.crafters.image/">jina.executors.crafters.image</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.crafters.image.crop/">jina.executors.crafters.image.crop</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.crafters.image.io/">jina.executors.crafters.image.io</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.crafters.image.normalize/">jina.executors.crafters.image.normalize</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.crafters.image.resize/">jina.executors.crafters.image.resize</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.executors.crafters.nlp/">jina.executors.crafters.nlp</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.crafters.nlp.split/">jina.executors.crafters.nlp.split</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.executors.encoders/">jina.executors.encoders</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.executors.encoders.image/">jina.executors.encoders.image</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.encoders.image.onnx/">jina.executors.encoders.image.onnx</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.encoders.image.paddlehub/">jina.executors.encoders.image.paddlehub</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.encoders.image.tfkeras/">jina.executors.encoders.image.tfkeras</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.encoders.image.torchvision/">jina.executors.encoders.image.torchvision</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.executors.encoders.nlp/">jina.executors.encoders.nlp</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.encoders.nlp.char/">jina.executors.encoders.nlp.char</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.encoders.nlp.flair/">jina.executors.encoders.nlp.flair</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.encoders.nlp.paddlehub/">jina.executors.encoders.nlp.paddlehub</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.encoders.nlp.transformer/">jina.executors.encoders.nlp.transformer</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.executors.encoders.numeric/">jina.executors.encoders.numeric</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.encoders.numeric.pca/">jina.executors.encoders.numeric.pca</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.executors.encoders.video/">jina.executors.encoders.video</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.encoders.video.paddlehub/">jina.executors.encoders.video.paddlehub</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.encoders.video.torchvision/">jina.executors.encoders.video.torchvision</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.encoders.helper/">jina.executors.encoders.helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.encoders.paddlehub/">jina.executors.encoders.paddlehub</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.encoders.torchvision/">jina.executors.encoders.torchvision</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.executors.indexers/">jina.executors.indexers</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.executors.indexers.keyvalue/">jina.executors.indexers.keyvalue</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.indexers.keyvalue.leveldb/">jina.executors.indexers.keyvalue.leveldb</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.indexers.keyvalue.proto/">jina.executors.indexers.keyvalue.proto</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.executors.indexers.vector/">jina.executors.indexers.vector</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.indexers.vector.annoy/">jina.executors.indexers.vector.annoy</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.indexers.vector.faiss/">jina.executors.indexers.vector.faiss</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.indexers.vector.nmslib/">jina.executors.indexers.vector.nmslib</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.indexers.vector.numpy/">jina.executors.indexers.vector.numpy</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.indexers.vector.sptag/">jina.executors.indexers.vector.sptag</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.executors.rankers/">jina.executors.rankers</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.rankers.bi_match/">jina.executors.rankers.bi_match</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.rankers.tfidf/">jina.executors.rankers.tfidf</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.compound/">jina.executors.compound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.decorators/">jina.executors.decorators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.metas/">jina.executors.metas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.requests/">jina.executors.requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/jina.flow/">jina.flow</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.helloworld/">jina.helloworld</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.helloworld.components/">jina.helloworld.components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.helloworld.helper/">jina.helloworld.helper</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.logging/">jina.logging</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.logging.base/">jina.logging.base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.logging.pipe/">jina.logging.pipe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.logging.profile/">jina.logging.profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.logging.queue/">jina.logging.queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.logging.sse/">jina.logging.sse</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.main/">jina.main</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.main.api/">jina.main.api</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.main.autocomplete/">jina.main.autocomplete</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.main.checker/">jina.main.checker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.main.parser/">jina.main.parser</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.peapods/">jina.peapods</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.peapods.container/">jina.peapods.container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.peapods.gateway/">jina.peapods.gateway</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.peapods.grpc/">jina.peapods.grpc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.peapods.grpc_asyncio/">jina.peapods.grpc_asyncio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.peapods.pea/">jina.peapods.pea</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.peapods.pod/">jina.peapods.pod</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.peapods.remote/">jina.peapods.remote</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.peapods.zmq/">jina.peapods.zmq</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.proto/">jina.proto</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.proto.jina_pb2/">jina.proto.jina_pb2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.proto.jina_pb2_grpc/">jina.proto.jina_pb2_grpc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/jina.enums/">jina.enums</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/jina.excepts/">jina.excepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/jina.helper/">jina.helper</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../yaml/yaml/">Jina YAML Syntax Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_exec/">Built-in Simple Executors and Reserved <code class="docutils literal notranslate"><span class="pre">yaml-path</span></code> in Jina</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../proto/main/">Jina Protobuf Specification</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../proto/modify/">Update Protocol Specification</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../envs/">OS Environment Variables Used in Jina</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extending Jina</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../mwu/">A Minimum Working Example</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Guideline When Adding New Executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../driver/">Guideline When Adding New Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hub/publish-your-pod-image/">Publish Your Pod Image to Jina Hub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING/">Contributing Guideline</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../jep/main/">Jina Enhancement Proposals (JEP)</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../jep/jep-1/main/">JEP 1 — Redesigning <code class="docutils literal notranslate"><span class="pre">Driver</span></code> and its relation to <code class="docutils literal notranslate"><span class="pre">Executor</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jep/jep-2/main/">JEP 2 — Supporting Docker Container in Flow API</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../RELEASE/">Release Cycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CHANGELOG/">Change Logs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Debugging and FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/user/">FAQ for End-Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/dev/">FAQ for Developers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Indices and Tables</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../all_exec/">List of 57 Executors in Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../all_driver/">List of 35 Drivers in Jina</a></li>
</ul>

    <p class="caption" role="heading"><span class="caption-text">Ecosystem</span></p>
    <ul>
        <li class="toctree-l1">
            <a class="reference internal" href="#">
                <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/search-light.svg">
                <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/search-dark.svg">
                Jina</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://hub.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/hub-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/hub-dark.svg">
            Jina Hub</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://finetuner.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/finetuner-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/finetuner-dark.svg">
            Finetuner</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://docarray.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/docarray-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/docarray-dark.svg">
            DocArray</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://clip-as-service.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/cas-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/cas-dark.svg">
            CLIP-as-service</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://github.com/jina-ai/jcloud">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/JCloud-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/JCloud-dark.svg">
            JCloud</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://now.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/now-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/now-dark.svg">
            NOW</a></li>
    </ul>
</div>

</div>

            </div>
            
        </div>
    </aside>
    <div class="main">
        <div class="content">
            <div class="article-container">
                <a href="#" class="back-to-top muted-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
                    </svg>
                    <span>Back to top</span>
                </a>
                <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
                        <button class="theme-toggle">
                            <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
                            <svg class="theme-icon-when-auto">
                                <use href="#svg-sun-half"></use>
                            </svg>
                            <svg class="theme-icon-when-dark">
                                <use href="#svg-moon"></use>
                            </svg>
                            <svg class="theme-icon-when-light">
                                <use href="#svg-sun"></use>
                            </svg>
                        </button>
                    </div>
                    <label class="toc-overlay-icon toc-content-icon"
                           for="__toc">
                        <div class="visually-hidden">Toggle table of contents sidebar</div>
                        <i class="icon">
                            <svg>
                                <use href="#svg-toc"></use>
                            </svg>
                        </i>
                    </label>
                </div>
                <article role="main">
                    <section id="guideline-when-adding-new-executor">
<h1>Guideline When Adding New Executor<a class="headerlink" href="#guideline-when-adding-new-executor" title="Permalink to this heading">#</a></h1>
<p>New deep learning model? New indexing algorithm? When the existing executors/drivers do not fit your requirement, and you can not find a useful one from <a class="reference external" href="https://hub.jina.ai">Jina Hub</a>, you can simply extend Jina to what you need without even touching the Jina codebase.</p>
<p>In this chapter, we will show you the guideline of making an extension for a <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.BaseExecutor</span></code>. Generally speaking, the steps are the following:</p>
<ol class="arabic simple">
<li><p>Decide which <code class="xref py py-class docutils literal notranslate"><span class="pre">Executor</span></code> class to inherit from;</p></li>
<li><p>Override <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">post_init()</span></code>;</p></li>
<li><p>Override the <em>core</em> method of the base class;</p></li>
<li><p>(Optional) implement the save logic.</p></li>
</ol>
<section id="decide-which-executor-class-to-inherit-from">
<h2>Decide which <code class="xref py py-class docutils literal notranslate"><span class="pre">Executor</span></code> class to inherit from<a class="headerlink" href="#decide-which-executor-class-to-inherit-from" title="Permalink to this heading">#</a></h2>
<p>The list of executors supported by the current Jina can be found <a class="reference external" href="https://docs.jina.ai/chapters/all_exec.html">here</a>. As one can see, all executors are inherited from <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.BaseExecutor</span></code>. So do you want to inherit directly from <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseExecutor</span></code> for your extension as well? In general you don’t. Rule of thumb, you always pick the executor that shares the similar logic to inherit.</p>
<p>If your algorithm is so unique and does not fit any any of the category below, you may want to <a class="reference external" href="https://github.com/jina-ai/jina/issues/new">submit an issue for discussion</a> before you start.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Inherit from class <code class="docutils literal notranslate"><span class="pre">X</span></code> when …</p>
<ul>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.encoders.BaseEncoder</span></code></p>
<p>You want to represent the chunks as vector embeddings.</p>
<ul>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.encoders.BaseNumericEncoder</span></code></p>
<p>You want to represent numpy array object (e.g. image, video, audio) as vector embeddings.</p>
</li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.encoders.BaseTextEncoder</span></code></p>
<p>You want to represent string object as vector embeddings.</p>
</li>
</ul>
</li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.indexers.BaseIndexer</span></code></p>
<p>You want to save and retrieve vectors and key-value information from storage.</p>
<ul>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.indexers.BaseVectorIndexer</span></code></p>
<p>You want to save and retrieve vectors from storage.</p>
<ul>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.indexers.NumpyIndexer</span></code></p>
<p>You vector-indexer uses a simple numpy array for storage, you only want to specify the query logic.</p>
</li>
</ul>
</li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.indexers.BaseKVIndexer</span></code></p>
<p>You want to save and retrieve key-value pair from storage.</p>
</li>
</ul>
</li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.craters.BaseCrafter</span></code></p>
<p>You want to segment/transform the documents and chunks.</p>
<ul>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.craters.BaseDocCrafter</span></code></p>
<p>You want to transform the documents by modifying some fields.</p>
<ul>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.craters.BaseChunkCrafter</span></code></p>
<p>You want to transform the chunks by modifying some fields.</p>
</li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.craters.BaseSegmenter</span></code></p>
<p>You want to segment the documents into chunks.</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.BaseRanker</span></code></p>
<p>You want to segment/transform the documents and chunks.</p>
</li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.CompoundExecutor</span></code></p>
<p>You want to combine multiple executors in one.</p>
</li>
</ul>
</div>
</section>
<section id="override-init-and-post-init">
<h2>Override <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">post_init()</span></code><a class="headerlink" href="#override-init-and-post-init" title="Permalink to this heading">#</a></h2>
<section id="override-init">
<h3>Override <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code><a class="headerlink" href="#override-init" title="Permalink to this heading">#</a></h3>
<p>You can put simple type attributes that define the behavior of your <code class="docutils literal notranslate"><span class="pre">Executor</span></code> into <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code>. Simple types represent all <cite>pickle</cite>-able types, including: integer, bool, string, tuple of simple types, list of simple types, map of simple type. For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina.executors.crafters</span> <span class="kn">import</span> <span class="n">BaseSegmenter</span>

<span class="k">class</span> <span class="nc">GifPreprocessor</span><span class="p">(</span><span class="n">BaseSegmenter</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img_shape</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">96</span><span class="p">,</span> <span class="n">every_k_frame</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">max_frame</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">from_bytes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
      <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">img_shape</span> <span class="o">=</span> <span class="n">img_shape</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">every_k_frame</span> <span class="o">=</span> <span class="n">every_k_frame</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">max_frame</span> <span class="o">=</span> <span class="n">max_frame</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">from_bytes</span> <span class="o">=</span> <span class="n">from_bytes</span>
</pre></div>
</div>
<p>Remember to add <code class="docutils literal notranslate"><span class="pre">super().__init__(*args,</span> <span class="pre">**kwargs)</span></code> to your <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code>. Only in this way you can enjoy many magic features, e.g. YAML support, persistence from the base class (and <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseExecutor</span></code>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All attributes declared in <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code> will be persisted during <code class="xref py py-meth docutils literal notranslate"><span class="pre">save()</span></code>  and <code class="xref py py-meth docutils literal notranslate"><span class="pre">load()</span></code>.</p>
</div>
</section>
<section id="override-post-init">
<h3>Override <code class="xref py py-meth docutils literal notranslate"><span class="pre">post_init()</span></code><a class="headerlink" href="#override-post-init" title="Permalink to this heading">#</a></h3>
<p>So what if the data you need to load is not in simple type. For example, a deep learning graph, a big pretrained model, a gRPC stub, a tensorflow session, a thread? The you can put them into <code class="xref py py-meth docutils literal notranslate"><span class="pre">post_init()</span></code>.</p>
<p>Another scenario is when you know there is a better persistence method other than <code class="docutils literal notranslate"><span class="pre">pickle</span></code>. For example, your hyperparameters matrix in numpy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> is certainly pickable. However, one can simply read and write it via standard file IO, and it is likely more efficient than <code class="docutils literal notranslate"><span class="pre">pickle</span></code>. In this case, you do the data loading in <code class="xref py py-meth docutils literal notranslate"><span class="pre">post_init()</span></code>.</p>
<p>Here is a good example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jina.executors.encoders</span> <span class="kn">import</span> <span class="n">BaseTextEncoder</span>

<span class="k">class</span> <span class="nc">TextPaddlehubEncoder</span><span class="p">(</span><span class="n">BaseTextEncoder</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;ernie_tiny&#39;</span><span class="p">,</span>
                 <span class="n">max_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>
                 <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_name</span> <span class="o">=</span> <span class="n">model_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_length</span> <span class="o">=</span> <span class="n">max_length</span>


    <span class="k">def</span> <span class="nf">post_init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">paddlehub</span> <span class="k">as</span> <span class="nn">hub</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">hub</span><span class="o">.</span><span class="n">Module</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">MAX_SEQ_LEN</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_length</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">post_init()</span></code> is also a good place to introduce package dependency, e.g. <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">x</span></code> or <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">x</span> <span class="pre">import</span> <span class="pre">y</span></code>. Naively, one can always put all imports upfront at the top of the file. However, this will throw an <code class="docutils literal notranslate"><span class="pre">ModuleNotFound</span></code> exception when this package is not installed locally. Sometimes it may break the whole system because of this one missing dependency.</p>
<p>Rule of thumb, only import packages where you really need them. Often these dependencies are only required in <code class="xref py py-meth docutils literal notranslate"><span class="pre">post_init()</span></code> and the core method, which we shall see later.</p>
</div>
</section>
</section>
<section id="override-the-core-method-of-the-base-class">
<h2>Override the <em>core</em> method of the base class<a class="headerlink" href="#override-the-core-method-of-the-base-class" title="Permalink to this heading">#</a></h2>
<p>Each <code class="xref py py-class docutils literal notranslate"><span class="pre">Executor</span></code> has a core method, which defines the algorithmic behavior of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Executor</span></code>. For making your own extension, you have to override the core method. The following table lists the core method you may want to override. Note some executors may have multiple core methods.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Base class</p></td>
<td><p>Core method(s)</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseEncoder</span></code></p></td>
<td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">encode()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCrafter</span></code></p></td>
<td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">craft()</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseIndexer</span></code></p></td>
<td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">add()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseRanker</span></code></p></td>
<td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">score()</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Feel free to override other methods/properties as you need. But frankly, most of the extension can be done by simply overriding the core methods listed above. Nothing more. You can read the source code of our executors for details.</p>
</section>
<section id="implement-the-persistence-logic">
<h2>Implement the persistence logic<a class="headerlink" href="#implement-the-persistence-logic" title="Permalink to this heading">#</a></h2>
<p>If you don’t override <code class="xref py py-meth docutils literal notranslate"><span class="pre">post_init()</span></code>, then you don’t need to implement persistence logic. You get YAML and persistency support off-the-shelf because of <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseExecutor</span></code>. Simple crafters and rankers fall into this category.</p>
<p>If you override <code class="xref py py-meth docutils literal notranslate"><span class="pre">post_init()</span></code> but you don’t care about persisting its state in the next run (when the executor process is restarted); or the state is simply unchanged during the run, then you don’t need to implement persistence logic. Loading from a fixed pretrained deep learning model falls into this category.</p>
<p>Persistence logic is only required <strong>when you implement customized loading logic in :meth:`post_init` and the state is changed during the run</strong>. Then you need to override <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getstate__()</span></code>. Many of the indexers fall into this category.</p>
<p>In the example below, the <code class="docutils literal notranslate"><span class="pre">tokenizer</span></code> is loaded in <code class="xref py py-meth docutils literal notranslate"><span class="pre">post_init()</span></code> and saved in <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getstate__()</span></code>, whcih completes the persistency cycle.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CustomizedEncoder</span><span class="p">(</span><span class="n">BaseEncoder</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">post_init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span> <span class="o">=</span> <span class="n">tokenizer_dict</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">]</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_tmp_model_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span><span class="o">.</span><span class="n">padding_side</span> <span class="o">=</span> <span class="s1">&#39;right&#39;</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span><span class="o">.</span><span class="n">save_pretrained</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_abspath</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="how-can-i-use-my-extension">
<h2>How Can I Use My Extension<a class="headerlink" href="#how-can-i-use-my-extension" title="Permalink to this heading">#</a></h2>
<p>You can use the extension by specifying <code class="docutils literal notranslate"><span class="pre">py_modules</span></code> in the YAML file. For example, your extension Python file is called <code class="docutils literal notranslate"><span class="pre">my_encoder.py</span></code>, which describes <code class="xref py py-class docutils literal notranslate"><span class="pre">MyEncoder</span></code>. Then you can define a YAML file (say <code class="docutils literal notranslate"><span class="pre">my.yml</span></code>) as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="kt">!MyEncoder</span><span class="w"></span>
<span class="nt">with</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">greetings</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hello im external encoder</span><span class="w"></span>
<span class="nt">metas</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">py_modules</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_encoder.py</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also assign a list of files to <code class="docutils literal notranslate"><span class="pre">metas.py_modules</span></code> if your Python logic is splitted over multiple files. This YAML file and all Python extension files should be put under the same directory.</p>
</div>
<p>Then simply use it in Jina CLI by specifying <code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">pod</span> <span class="pre">--yaml-path=my.yml</span></code>, or <code class="docutils literal notranslate"><span class="pre">Flow().add(yaml_path='my.yml')</span></code> in Flow API.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you use customized executor inside a <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.executors.CompoundExecutor</span></code>, then you only need to set <code class="docutils literal notranslate"><span class="pre">metas.py_modules</span></code> at the root level, not at the sub-component level.</p>
</div>
</section>
<section id="i-want-to-contribute-it-to-jina">
<h2>I Want to Contribute it to Jina<a class="headerlink" href="#i-want-to-contribute-it-to-jina" title="Permalink to this heading">#</a></h2>
<p>We are really glad to hear that! We have done quite some effort to help you contribute and share your extensions with others.</p>
<p>You can easily pack your extension and share it with others via Docker image. For more information, please check out <a class="reference external" href="https://hub.jina.ai">Jina Hub</a>. Just make a pull request there and our CICD system will take care of building, testing and uploading.</p>
</section>
</section>

                </article>
            </div>
            <footer>
                
                <div class="related-pages">
                    <a class="next-page" href="../driver/">
                        <div class="page-info">
                            <div class="context">
                                <span>Next</span>
                            </div>
                            <div class="title">Guideline When Adding New Driver</div>
                        </div>
                        <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
                    </a>
                    <a class="prev-page" href="../mwu/">
                        <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
                        <div class="page-info">
                            <div class="context">
                                <span>Previous</span>
                            </div>
                            
                            <div class="title">A Minimum Working Example</div>
                            
                        </div>
                    </a>
                </div>
                <div class="bottom-of-page">
                    <div class="left-details">
                        <div class="copyright">
                            Copyright &#169; Jina AI Limited. All rights reserved.
                        </div><div class="last-updated">
                            Last updated on Oct 19, 2022</div>
                    </div>
                    <div class="right-details">
                        <div class="social-btns">
                            <a class='social-btn' href="https://github.com/jina-ai/jina" aria-label="GitHub"
                               target="_blank" rel="noreferrer"> <i class="fab fa-github"></i></a>
                            <a class='social-btn' href="https://slack.jina.ai" aria-label="Slack" target="_blank"
                               rel="noreferrer"> <i class="fab fa-slack"></i></a>
                            <a class='social-btn' href="https://youtube.com/c/jina-ai" aria-label="YouTube"
                               target="_blank" rel="noreferrer"> <i class="fab fa-youtube"></i></a>
                            <a class='social-btn' href="https://twitter.com/JinaAI_" aria-label="Twitter"
                               target="_blank" rel="noreferrer"> <i class="fab fa-twitter"></i></a>
                            <a class='social-btn' href="https://www.linkedin.com/company/jinaai/" aria-label="LinkedIn"
                               target="_blank" rel="noreferrer"> <i class="fab fa-linkedin"></i></a>
                        </div>
                    </div>
                </div>
                
            </footer>
        </div>
        <aside class="toc-drawer">
            
            
            <div class="toc-sticky toc-scroll">
                <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
                </div>
                <div class="toc-tree-container">
                    <div class="toc-tree">
                        <ul>
<li><a class="reference internal" href="#">Guideline When Adding New Executor</a><ul>
<li><a class="reference internal" href="#decide-which-executor-class-to-inherit-from">Decide which <code class="xref py py-class docutils literal notranslate"><span class="pre">Executor</span></code> class to inherit from</a></li>
<li><a class="reference internal" href="#override-init-and-post-init">Override <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">post_init()</span></code></a><ul>
<li><a class="reference internal" href="#override-init">Override <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li><a class="reference internal" href="#override-post-init">Override <code class="xref py py-meth docutils literal notranslate"><span class="pre">post_init()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#override-the-core-method-of-the-base-class">Override the <em>core</em> method of the base class</a></li>
<li><a class="reference internal" href="#implement-the-persistence-logic">Implement the persistence logic</a></li>
<li><a class="reference internal" href="#how-can-i-use-my-extension">How Can I Use My Extension</a></li>
<li><a class="reference internal" href="#i-want-to-contribute-it-to-jina">I Want to Contribute it to Jina</a></li>
</ul>
</li>
</ul>

                    </div>
                </div>
            </div>
            
            
        </aside>
    </div>
    <qa-bot
            title="Jina Bot"
            description="Build cross-modal and multi-modal applications on the cloud"
    >
        <template>
            <dl>
                <dt>You can ask questions about our docs. Try:</dt>
                <dd>Does Jina support Kubernetes?</dd>
                <dd>What are the basic concepts in Jina?</dd>
                <dd>How to share my Executor?</dd>
            </dl>
        </template>
    </qa-bot>
</div>
<img referrerpolicy="no-referrer-when-downgrade"
     src="https://static.scarf.sh/a.png?x-pxid=2823e771-0e1e-4320-8fde-48bc48e53262"/><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/tabs.js"></script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() { 
            document.querySelector('qa-bot').setAttribute('server', 'https://jina-ai-jina.docsqa.jina.ai');
        });
        </script>
    <script src="https://cdn.jsdelivr.net/npm/qabot@0.4"></script>
    </body>
</html>