<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

<meta property="og:title" content="JEP 2 ‚Äî Supporting Docker Container in Flow API" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://docs.jina.ai/chapters/jep/jep-2/main/" />
  
<meta property="og:site_name" content="Jina 0.1.0 Documentation" />
  
<meta property="og:description" content="Table of Contents: JEP 2 ‚Äî Supporting Docker Container in Flow API- Abstract, Motivation, Rationale- Can we support remote Pod in the Flow API?, Run pods in their own container, New CLI argument., Specification- A minimum Jina Docker Contianer., Specification, Backwards Compatibility.. Author, Ha..." />
  
<meta property="og:image" content="https://docs.jina.ai/_static/banner.png" />
  
<meta property="og:image:alt" content="Jina 0.1.0 Documentation" />
  
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@JinaAI_">
<meta name="twitter:creator" content="@JinaAI_">
<meta name="description" content="Build cross-modal and multi-modal applications on the cloud ¬∑ Neural Search ¬∑ Creative AI ¬∑ Cloud Native ¬∑ MLOps">
<meta property="og:description" content="Build cross-modal and multi-modal applications on the cloud ¬∑ Neural Search ¬∑ Creative AI ¬∑ Cloud Native ¬∑ MLOps">

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-48ZDWC8GT6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-48ZDWC8GT6');
</script>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    <link rel="index" title="Index" href="../../../../genindex/" /><link rel="search" title="Search" href="../../../../search/" /><link rel="next" title="Release Cycle" href="../../../RELEASE/" /><link rel="prev" title="JEP 1 ‚Äî Redesigning Driver and its relation to Executor" href="../../jep-1/main/" />
        <link rel="canonical" href="https://docs.jina.ai/chapters/jep/jep-2/main.html" />

    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/><meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>JEP 2 ‚Äî Supporting Docker Container in Flow API - Jina 3.10.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/main.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/docbot.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: #4d4d4d;
  --color-brand-primary: #009191;
  --color-brand-content: #009191;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
    <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
    <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
    <header class="mobile-header">
        <div class="header-left">
            <label class="nav-overlay-icon" for="__navigation">
                <div class="visually-hidden">Toggle site navigation sidebar</div>
                <i class="icon">
                    <svg>
                        <use href="#svg-menu"></use>
                    </svg>
                </i>
            </label>
        </div>
        <div class="header-center">
            <a href="../../../../">
                <div class="brand">Jina 3.10.2 documentation</div>
            </a>
        </div>
        <div class="header-right">
            <div class="theme-toggle-container theme-toggle-header">
                <button class="theme-toggle">
                    <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
                    <svg class="theme-icon-when-auto">
                        <use href="#svg-sun-half"></use>
                    </svg>
                    <svg class="theme-icon-when-dark">
                        <use href="#svg-moon"></use>
                    </svg>
                    <svg class="theme-icon-when-light">
                        <use href="#svg-sun"></use>
                    </svg>
                </button>
            </div>
            <label class="toc-overlay-icon toc-header-icon" for="__toc">
                <div class="visually-hidden">Toggle table of contents sidebar</div>
                <i class="icon">
                    <svg>
                        <use href="#svg-toc"></use>
                    </svg>
                </i>
            </label>
        </div>
    </header>
    <aside class="sidebar-drawer">
        <div class="sidebar-container">
            
            <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../../">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../../_static/logo-light.svg" alt="Light Logo" />
    <img class="sidebar-logo only-dark" src="../../../../_static/logo-dark.svg" alt="Dark Logo" />
  </div>
  
  
</a>
<div class="sd-d-flex-row sd-align-major-spaced">
  <a class="github-button" href="https://github.com/jina-ai/jina" data-icon="octicon-star" data-show-count="true" aria-label="Star jina-ai/jina on GitHub" style="opacity: 0;">Star</a>
  
</div><form class="sidebar-search-container" method="get" action="../../../../search/" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
    <p class="caption" role="heading"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install/via-pip/">Install Jina via <code class="docutils literal notranslate"><span class="pre">pip</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/via-docker/">Install Jina via Docker Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/on-rasp-linux/">Install Jina on Raspberry Pi and other Linux Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/upgrade/">Upgrade Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/autocomplete/">Autocomplete commands on Bash, Zsh and Fish</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../helloworld/main/">Jina ‚ÄúHello, World!‚Äù üëãüåç</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../101/.sphinx/">Jina 101: First Thing to Learn About Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../flow/README/">Using Flow API to Compose Your Jina Workflow</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../hub/main/">Using Jina Pod with Docker Container</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../hub/build-pod-image/">Build Your Pod into a Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hub/use-your-pod/">Use Your Pod Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hub/publish-your-pod-image/">Publish Your Pod Image to Jina Hub</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../remote/main/">Using Jina Pod Remotely</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../remote/run-remote-pod-console/">Creating a Remote Jina Pod from Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../remote/run-remote-pod-jina/">Creating a Remote Jina Pod via Jina Gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../remote/run-remote-pod-flow/">Creating a Remote Jina Pod via Flow API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../dashboard/main/">Using Dashboard to Monitor Logs and View Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli/exit/">Gracefully Exit Jina</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../cli/main/">Jina Command-Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../cli/jina-helloworld/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">hello-world</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cli/jina-pod/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">pod</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cli/jina-flow/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">flow</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cli/jina-gateway/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">gateway</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cli/jina-ping/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">ping</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cli/jina-check/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">check</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cli/jina-log/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">log</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cli/jina-pea/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">pea</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cli/jina-client/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">client</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../api/jina/">Jina Python API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/jina.clients/">jina.clients</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../api/jina.clients.python/">jina.clients.python</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/jina.clients.python.grpc/">jina.clients.python.grpc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/jina.clients.python.helper/">jina.clients.python.helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/jina.clients.python.request/">jina.clients.python.request</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/jina.drivers/">jina.drivers</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.drivers.control/">jina.drivers.control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.drivers.craft/">jina.drivers.craft</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.drivers.encode/">jina.drivers.encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.drivers.filter/">jina.drivers.filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.drivers.helper/">jina.drivers.helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.drivers.index/">jina.drivers.index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.drivers.prune/">jina.drivers.prune</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.drivers.reduce/">jina.drivers.reduce</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.drivers.score/">jina.drivers.score</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.drivers.search/">jina.drivers.search</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/jina.executors/">jina.executors</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../api/jina.executors.crafters/">jina.executors.crafters</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../../api/jina.executors.crafters.image/">jina.executors.crafters.image</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.crafters.image.crop/">jina.executors.crafters.image.crop</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.crafters.image.io/">jina.executors.crafters.image.io</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.crafters.image.normalize/">jina.executors.crafters.image.normalize</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.crafters.image.resize/">jina.executors.crafters.image.resize</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../../api/jina.executors.crafters.nlp/">jina.executors.crafters.nlp</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.crafters.nlp.split/">jina.executors.crafters.nlp.split</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../api/jina.executors.encoders/">jina.executors.encoders</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../../api/jina.executors.encoders.image/">jina.executors.encoders.image</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.encoders.image.onnx/">jina.executors.encoders.image.onnx</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.encoders.image.paddlehub/">jina.executors.encoders.image.paddlehub</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.encoders.image.tfkeras/">jina.executors.encoders.image.tfkeras</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.encoders.image.torchvision/">jina.executors.encoders.image.torchvision</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../../api/jina.executors.encoders.nlp/">jina.executors.encoders.nlp</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.encoders.nlp.char/">jina.executors.encoders.nlp.char</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.encoders.nlp.flair/">jina.executors.encoders.nlp.flair</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.encoders.nlp.paddlehub/">jina.executors.encoders.nlp.paddlehub</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.encoders.nlp.transformer/">jina.executors.encoders.nlp.transformer</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../../api/jina.executors.encoders.numeric/">jina.executors.encoders.numeric</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.encoders.numeric.pca/">jina.executors.encoders.numeric.pca</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../../api/jina.executors.encoders.video/">jina.executors.encoders.video</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.encoders.video.paddlehub/">jina.executors.encoders.video.paddlehub</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.encoders.video.torchvision/">jina.executors.encoders.video.torchvision</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/jina.executors.encoders.helper/">jina.executors.encoders.helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/jina.executors.encoders.paddlehub/">jina.executors.encoders.paddlehub</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/jina.executors.encoders.torchvision/">jina.executors.encoders.torchvision</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../api/jina.executors.indexers/">jina.executors.indexers</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../../api/jina.executors.indexers.keyvalue/">jina.executors.indexers.keyvalue</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.indexers.keyvalue.leveldb/">jina.executors.indexers.keyvalue.leveldb</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.indexers.keyvalue.proto/">jina.executors.indexers.keyvalue.proto</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../../api/jina.executors.indexers.vector/">jina.executors.indexers.vector</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.indexers.vector.annoy/">jina.executors.indexers.vector.annoy</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.indexers.vector.faiss/">jina.executors.indexers.vector.faiss</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.indexers.vector.nmslib/">jina.executors.indexers.vector.nmslib</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.indexers.vector.numpy/">jina.executors.indexers.vector.numpy</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../../api/jina.executors.indexers.vector.sptag/">jina.executors.indexers.vector.sptag</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../api/jina.executors.rankers/">jina.executors.rankers</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/jina.executors.rankers.bi_match/">jina.executors.rankers.bi_match</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/jina.executors.rankers.tfidf/">jina.executors.rankers.tfidf</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.executors.compound/">jina.executors.compound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.executors.decorators/">jina.executors.decorators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.executors.metas/">jina.executors.metas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.executors.requests/">jina.executors.requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/jina.flow/">jina.flow</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/jina.helloworld/">jina.helloworld</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.helloworld.components/">jina.helloworld.components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.helloworld.helper/">jina.helloworld.helper</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/jina.logging/">jina.logging</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.logging.base/">jina.logging.base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.logging.pipe/">jina.logging.pipe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.logging.profile/">jina.logging.profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.logging.queue/">jina.logging.queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.logging.sse/">jina.logging.sse</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/jina.main/">jina.main</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.main.api/">jina.main.api</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.main.autocomplete/">jina.main.autocomplete</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.main.checker/">jina.main.checker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.main.parser/">jina.main.parser</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/jina.peapods/">jina.peapods</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.peapods.container/">jina.peapods.container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.peapods.gateway/">jina.peapods.gateway</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.peapods.grpc/">jina.peapods.grpc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.peapods.grpc_asyncio/">jina.peapods.grpc_asyncio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.peapods.pea/">jina.peapods.pea</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.peapods.pod/">jina.peapods.pod</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.peapods.remote/">jina.peapods.remote</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.peapods.zmq/">jina.peapods.zmq</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api/jina.proto/">jina.proto</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.proto.jina_pb2/">jina.proto.jina_pb2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/jina.proto.jina_pb2_grpc/">jina.proto.jina_pb2_grpc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/jina.enums/">jina.enums</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/jina.excepts/">jina.excepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/jina.helper/">jina.helper</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../yaml/yaml/">Jina YAML Syntax Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../simple_exec/">Built-in Simple Executors and Reserved <code class="docutils literal notranslate"><span class="pre">yaml-path</span></code> in Jina</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../proto/main/">Jina Protobuf Specification</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../proto/modify/">Update Protocol Specification</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../envs/">OS Environment Variables Used in Jina</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extending Jina</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../extend/mwu/">A Minimum Working Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../extend/executor/">Guideline When Adding New Executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../extend/driver/">Guideline When Adding New Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hub/publish-your-pod-image/">Publish Your Pod Image to Jina Hub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../CONTRIBUTING/">Contributing Guideline</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../main/">Jina Enhancement Proposals (JEP)</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../jep-1/main/">JEP 1 ‚Äî Redesigning <code class="docutils literal notranslate"><span class="pre">Driver</span></code> and its relation to <code class="docutils literal notranslate"><span class="pre">Executor</span></code></a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">JEP 2 ‚Äî Supporting Docker Container in Flow API</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../RELEASE/">Release Cycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../CHANGELOG/">Change Logs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Debugging and FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting/">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/user/">FAQ for End-Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/dev/">FAQ for Developers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Indices and Tables</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../all_exec/">List of 57 Executors in Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../all_driver/">List of 35 Drivers in Jina</a></li>
</ul>

    <p class="caption" role="heading"><span class="caption-text">Ecosystem</span></p>
    <ul>
        <li class="toctree-l1">
            <a class="reference internal" href="#">
                <img class="sidebar-ecosys-logo only-light-line" src="../../../../_static/search-light.svg">
                <img class="sidebar-ecosys-logo only-dark-line" src="../../../../_static/search-dark.svg">
                Jina</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://hub.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../../_static/hub-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../../_static/hub-dark.svg">
            Jina Hub</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://finetuner.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../../_static/finetuner-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../../_static/finetuner-dark.svg">
            Finetuner</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://docarray.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../../_static/docarray-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../../_static/docarray-dark.svg">
            DocArray</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://clip-as-service.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../../_static/cas-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../../_static/cas-dark.svg">
            CLIP-as-service</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://github.com/jina-ai/jcloud">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../../_static/JCloud-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../../_static/JCloud-dark.svg">
            JCloud</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://now.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../../_static/now-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../../_static/now-dark.svg">
            NOW</a></li>
    </ul>
</div>

</div>

            </div>
            
        </div>
    </aside>
    <div class="main">
        <div class="content">
            <div class="article-container">
                <a href="#" class="back-to-top muted-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
                    </svg>
                    <span>Back to top</span>
                </a>
                <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
                        <button class="theme-toggle">
                            <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
                            <svg class="theme-icon-when-auto">
                                <use href="#svg-sun-half"></use>
                            </svg>
                            <svg class="theme-icon-when-dark">
                                <use href="#svg-moon"></use>
                            </svg>
                            <svg class="theme-icon-when-light">
                                <use href="#svg-sun"></use>
                            </svg>
                        </button>
                    </div>
                    <label class="toc-overlay-icon toc-content-icon"
                           for="__toc">
                        <div class="visually-hidden">Toggle table of contents sidebar</div>
                        <i class="icon">
                            <svg>
                                <use href="#svg-toc"></use>
                            </svg>
                        </i>
                    </label>
                </div>
                <article role="main">
                    <section id="jep-2-supporting-docker-container-in-flow-api">
<h1><a class="toc-backref" href="#id14" role="doc-backlink">JEP 2 ‚Äî Supporting Docker Container in Flow API</a><a class="headerlink" href="#jep-2-supporting-docker-container-in-flow-api" title="Permalink to this heading">#</a></h1>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#jep-2-supporting-docker-container-in-flow-api" id="id3">JEP 2 ‚Äî Supporting Docker Container in Flow API</a></p>
<ul>
<li><p><a class="reference internal" href="#abstract" id="id4">Abstract</a></p></li>
<li><p><a class="reference internal" href="#motivation" id="id5">Motivation</a></p></li>
<li><p><a class="reference internal" href="#rationale" id="id6">Rationale</a></p>
<ul>
<li><p><a class="reference internal" href="#can-we-support-remote-pod-in-the-flow-api" id="id7">Can we support remote Pod in the Flow API?</a></p></li>
<li><p><a class="reference internal" href="#run-pods-in-their-own-container" id="id8">Run pods in their own container</a></p></li>
<li><p><a class="reference internal" href="#new-cli-argument" id="id9">New CLI argument</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#specification" id="id10">Specification</a></p>
<ul>
<li><p><a class="reference internal" href="#a-minimum-jina-docker-contianer" id="id11">A minimum Jina Docker Contianer</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id2" id="id12">Specification</a></p></li>
<li><p><a class="reference internal" href="#backwards-compatibility" id="id13">Backwards Compatibility</a></p></li>
</ul>
</li>
</ul>
</nav>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Han Xiao (<a class="reference external" href="mailto:han&#46;xiao&#37;&#52;&#48;jina&#46;ai">han<span>&#46;</span>xiao<span>&#64;</span>jina<span>&#46;</span>ai</a>)</p>
</dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even"><p>Feb. 29, 2020</p>
</dd>
<dt class="field-odd">Status<span class="colon">:</span></dt>
<dd class="field-odd"><p>Draft</p>
</dd>
<dt class="field-even">Related JEPs<span class="colon">:</span></dt>
<dd class="field-even"><p></p></dd>
<dt class="field-odd">Created on Jina VCS version<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">&#64;c66b4b9</span></code></p>
</dd>
<dt class="field-even">Merged to Jina VCS version<span class="colon">:</span></dt>
<dd class="field-even"><p>TBA</p>
</dd>
<dt class="field-odd">Released in Jina version<span class="colon">:</span></dt>
<dd class="field-odd"><p>TBA</p>
</dd>
<dt class="field-even">Discussions<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://github.com/jina-ai/jina/issues/33">https://github.com/jina-ai/jina/issues/33</a></p>
</dd>
</dl>
<nav class="contents" id="id1">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#jep-2-supporting-docker-container-in-flow-api" id="id14">JEP 2 ‚Äî Supporting Docker Container in Flow API</a></p>
<ul>
<li><p><a class="reference internal" href="#abstract" id="id15">Abstract</a></p></li>
<li><p><a class="reference internal" href="#motivation" id="id16">Motivation</a></p></li>
<li><p><a class="reference internal" href="#rationale" id="id17">Rationale</a></p></li>
<li><p><a class="reference internal" href="#specification" id="id18">Specification</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id19">Specification</a></p></li>
<li><p><a class="reference internal" href="#backwards-compatibility" id="id20">Backwards Compatibility</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="abstract">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this heading">#</a></h2>
<p>We describe why and how we make <code class="xref py py-mod docutils literal notranslate"><span class="pre">jina.flow</span></code> to support Docker container.</p>
</section>
<section id="motivation">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Motivation</a><a class="headerlink" href="#motivation" title="Permalink to this heading">#</a></h2>
<p><code class="xref py py-mod docutils literal notranslate"><span class="pre">jina.flow</span></code> serves as the primary interface for Jina‚Äôs new users. It provides a set of friendly, easy-to-use API to organize a flow of microservices (aka, <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.peapods.pod.Pod</span></code>). It also provides basic orchestration abilities, such as start, scale up, flow pruning and terminate. This saves user quite some time as they would otherwise launch each <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.peapods.pod.Pod</span></code> and connect them manually.</p>
<p>In the current version, <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.flow.Flow</span></code> supports <code class="xref py py-func docutils literal notranslate"><span class="pre">jina.flow.Flow.add()</span></code> to allow user to define their own ‚Äúgraph‚Äù by specifying <code class="docutils literal notranslate"><span class="pre">send_to</span></code>, <code class="docutils literal notranslate"><span class="pre">recv_from</span></code>. The <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.flow.Flow</span></code> later uses <code class="xref py py-func docutils literal notranslate"><span class="pre">jina.flow.Flow.build()</span></code> method and connects all the <code class="docutils literal notranslate"><span class="pre">Pod</span></code> together. All sockets assignment are hidden from the user perspective.</p>
<p>One of the big limitations of the current <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.flow.Flow</span></code> is it does not support containerization, either partial or wholly. Imagine a user needs to run a <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.peapods.pod.Pod</span></code> in a container because of the complicated dependencies it relies on. The current <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.flow.Flow</span></code> can not do that. All <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.peapods.pod.Pod</span></code> are either run as a thread or process. This is in fact a common requirement as most of the DL/AI libraries do require specific versions of the DL package or complicated dependencies. Promoting the idea of ‚ÄúModel-as-Docker‚Äù and encouraging users to adapt to this idea not only solves the dependency issue, but also serves as preliminary education to our Jina Hub.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">Rationale</a><a class="headerlink" href="#rationale" title="Permalink to this heading">#</a></h2>
<p>To add containerization feature to the <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.flow.Flow</span></code>, we first need to understand what are the common use cases.</p>
<ul class="simple">
<li><dl class="simple">
<dt>All pods run outside of the container locally;</dt><dd><p>This is already supported in the current version</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>All pods run outside of the container remotely;</dt><dd><p>This should be supported but not tested. For the sake of security, this should not be encouraged.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Some pods run outside of the container;</dt><dd><p>This is a common use case, either locally or remotely.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>All pods run inside of <strong>one</strong> container;</dt><dd><p>No clear usage. May need to design the API separately</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Each pod runs in its own container;</dt><dd><p>This is a special case of ‚Äúsome pods run outside of the container‚Äù.</p>
</dd>
</dl>
</li>
</ul>
<p>As one can observe from the list, designing an API that allows Pods running locally or remotely, inside or outside the container is the key of this JEP. Imagine we add two new arguments when spawning each pod, <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">image</span></code>. Note that these two arguments should not be added to the arguments of <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.peapods.pod.Pod</span></code> but to <code class="xref py py-func docutils literal notranslate"><span class="pre">jina.flow.Flow.add()</span></code>.</p>
<section id="can-we-support-remote-pod-in-the-flow-api">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Can we support remote Pod in the Flow API?</a><a class="headerlink" href="#can-we-support-remote-pod-in-the-flow-api" title="Permalink to this heading">#</a></h3>
<p>Let‚Äôs first look at <code class="docutils literal notranslate"><span class="pre">host</span></code> argument. Supposedly,</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-host">
<span class="sig-name descname"><span class="pre">host</span></span><a class="headerlink" href="#confval-host" title="Permalink to this definition">#</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">host</span></code> describes the IP address that the added <code class="docutils literal notranslate"><span class="pre">Pod</span></code> will be running on, e.g. <code class="docutils literal notranslate"><span class="pre">192.168.1.20</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<p>One immediate problem is that <code class="xref py py-class docutils literal notranslate"><span class="pre">jina.flow.Flow</span></code> has no way to start this <code class="docutils literal notranslate"><span class="pre">Pod</span></code> remotely on <code class="docutils literal notranslate"><span class="pre">192.168.1.20</span></code>. To achieve, all remote workers need to register themselves or keep a daemon in the background, waiting the ‚Äúmaster‚Äù Flow sending a ‚Äúspawning‚Äù signal to them so they can start. We have no intention to implement such mechanism right now. This is completely out of the scope of the Flow API and seems reinventing the orchestration layer of Kubernetes or Docker Swarm.</p>
<p>Assuming the Pod is started already on the <code class="docutils literal notranslate"><span class="pre">host</span></code>, then writing <code class="docutils literal notranslate"><span class="pre">host</span></code> as an argument of <code class="xref py py-func docutils literal notranslate"><span class="pre">jina.flow.Flow.add()</span></code> can make it accessible to other Pods. This looks true at first, but look at the example below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;192.168.0.2&#39;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;p2&#39;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;192.168.0.3&#39;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">]))</span>  <span class="c1"># -&gt; p3</span>
</pre></div>
</div>
<p>In the example, <cite>p3</cite> is blocking the flow until <cite>p1</cite> and <cite>p2</cite> are all done. <cite>p3</cite> is on the ‚Äúbind‚Äù side, <cite>p1</cite> and <cite>p2</cite> are on the ‚Äúconnect‚Äù side. Therefore, it is in fact <cite>p3</cite> who needs to expose its IP to <cite>p1</cite> and <cite>p2</cite> to make sure <code class="docutils literal notranslate"><span class="pre">p1.host_out</span> <span class="pre">=</span> <span class="pre">p3.host</span></code> and <code class="docutils literal notranslate"><span class="pre">p2.host_out</span> <span class="pre">=</span> <span class="pre">p3.host</span></code>, not in the other way. Simply put, the <code class="docutils literal notranslate"><span class="pre">host</span></code> argument of <cite>p1</cite> and <cite>p2</cite> is useless in this case. Besides that, as <cite>p1</cite> and <cite>p2</cite> are already running in remote (manually), their <code class="docutils literal notranslate"><span class="pre">host_out</span></code> is not changeable by the Flow. This simple use case is not even possible if the Flow can not spawn Pod remotely.</p>
<p>So what can we support? If a remote pod is on the ‚Äúbind‚Äù side, and the local pods are on the ‚Äúconnect‚Äù side, then this works fine. Though in this case we can simply use the existing <code class="docutils literal notranslate"><span class="pre">host_in</span></code>, <code class="docutils literal notranslate"><span class="pre">host_out</span></code>. For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;p1&#39;</span><span class="p">)</span>  <span class="c1"># -&gt; p1 running remotely on 192.168.0.2</span>
            <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;p2&#39;</span><span class="p">,</span> <span class="n">host_in</span><span class="o">=</span><span class="s1">&#39;192.168.0.2&#39;</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>That is, in the current Flow API a remote pod must be ‚Äúbind‚Äù on both input socket and output socket. Otherwise, its ‚Äúconnect‚Äù socket must be specified with an IP address that is manually given when spawning.</p>
<p>Note, it is difficult to guarantee a ‚Äúbi-bind‚Äù Pod in an arbitrary flow. Depending on the topology, the input/output socket may switch the role between ‚Äúbind‚Äù and ‚Äúconnect‚Äù. Implementing heuristics to maximize the chance that a remote Pod enjoys  ‚Äúbi-bind‚Äù may be possible, but is tedious and not very cost-effective.</p>
<p>As the conclusion, <strong>we decide not to support remote Pod in this JEP.</strong> All pods are limited to run locally.</p>
</section>
<section id="run-pods-in-their-own-container">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Run pods in their own container</a><a class="headerlink" href="#run-pods-in-their-own-container" title="Permalink to this heading">#</a></h3>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-image">
<span class="sig-name descname"><span class="pre">image</span></span><a class="headerlink" href="#confval-image" title="Permalink to this definition">#</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">image</span></code> describes the docker image that a <code class="docutils literal notranslate"><span class="pre">Pod</span></code> will be running with, e.g. <code class="docutils literal notranslate"><span class="pre">jina-encoder:nlp-bert:0.1</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<p>First, we may need a good naming convention for the image tag. This needs to be discussed separately.</p>
<p>Let‚Äôs look at the following example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">Flow</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="n">yaml_path</span><span class="o">=</span><span class="s1">&#39;./encode.yml&#39;</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s1">&#39;jina-encoder:cv-blah&#39;</span><span class="p">)</span>  <span class="c1"># -&gt; p1 runs in the container</span>
            <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;p2&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>All keyword arguments of <cite>p1</cite> now forward to <code class="docutils literal notranslate"><span class="pre">jina-encoder:cv-blah</span></code>. So instead of running process/thread in</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>                    <span class="n">e_pod</span><span class="o">.</span><span class="n">head_args</span><span class="o">.</span><span class="n">socket_in</span> <span class="o">=</span> <span class="n">s_pod</span><span class="o">.</span><span class="n">tail_args</span><span class="o">.</span><span class="n">socket_out</span><span class="o">.</span><span class="n">paired</span>
<span class="linenos"> 2</span>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">optimize_level</span> <span class="o">&gt;</span> <span class="n">FlowOptimizeLevel</span><span class="o">.</span><span class="n">NONE</span> <span class="ow">and</span> <span class="n">e_pod</span><span class="o">.</span><span class="n">is_head_router</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">s_pod</span><span class="o">.</span><span class="n">is_tail_router</span><span class="p">:</span>
<span class="linenos"> 3</span>                        <span class="n">e_pod</span><span class="o">.</span><span class="n">connect_to_tail_of</span><span class="p">(</span><span class="n">s_pod</span><span class="p">)</span>
<span class="linenos"> 4</span>                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">optimize_level</span> <span class="o">&gt;</span> <span class="n">FlowOptimizeLevel</span><span class="o">.</span><span class="n">NONE</span> <span class="ow">and</span> <span class="n">s_pod</span><span class="o">.</span><span class="n">is_tail_router</span> <span class="ow">and</span> <span class="n">s_pod</span><span class="o">.</span><span class="n">tail_args</span><span class="o">.</span><span class="n">num_part</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos"> 5</span>                        <span class="n">s_pod</span><span class="o">.</span><span class="n">connect_to_head_of</span><span class="p">(</span><span class="n">e_pod</span><span class="p">)</span>
<span class="linenos"> 6</span>                    <span class="k">else</span><span class="p">:</span>
<span class="linenos"> 7</span>                        <span class="n">FlowPod</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">s_pod</span><span class="p">,</span> <span class="n">e_pod</span><span class="p">,</span> <span class="n">first_socket_type</span><span class="o">=</span><span class="n">SocketType</span><span class="o">.</span><span class="n">PUSH_CONNECT</span><span class="p">)</span>
<span class="linenos"> 8</span>            <span class="k">else</span><span class="p">:</span>
<span class="linenos"> 9</span>                <span class="k">raise</span> <span class="n">FlowTopologyError</span><span class="p">(</span><span class="s1">&#39;found </span><span class="si">%d</span><span class="s1"> edges start with </span><span class="si">%s</span><span class="s1"> and </span><span class="si">%d</span><span class="s1"> edges end with </span><span class="si">%s</span><span class="s1">, &#39;</span>
<span class="linenos">10</span>                                        <span class="s1">&#39;this type of topology is ambiguous and should not exist, &#39;</span>
<span class="linenos">11</span>                                        <span class="s1">&#39;i can not determine the socket type&#39;</span> <span class="o">%</span> <span class="p">(</span>
</pre></div>
</div>
<p>It should run the Pod via <strong class="command">docker run jina-encoder:cv-blah --name p1 --yaml_path ./encode.yml</strong>.</p>
<p>But how to handle multiple replicas?</p>
<p>Note a Pod can contain multiple Peas when <code class="docutils literal notranslate"><span class="pre">--replicas</span> <span class="pre">&gt;</span> <span class="pre">1</span></code>. If a Pod is wrapped in a container, then that means all its Peas, including the head and tail are all running in the container.</p>
<p>This poses a problem. The head and tail of a Pod can be eliminated during the <code class="xref py py-func docutils literal notranslate"><span class="pre">jina.flow.Flow.build()</span></code>. The structure of a Pod is ‚Äúbroken‚Äù because of this. We can of course omit the heuristic of topology optimization when <code class="docutils literal notranslate"><span class="pre">image</span></code> and <code class="docutils literal notranslate"><span class="pre">replicas</span></code> are both set. But before that, let‚Äôs first think what does it mean when a user specify <code class="docutils literal notranslate"><span class="pre">replicas</span></code> and <code class="docutils literal notranslate"><span class="pre">image</span></code> at the same time. Does it mean running one container but having <code class="docutils literal notranslate"><span class="pre">replicas</span></code> number of peas inside the container, or does it mean running <code class="docutils literal notranslate"><span class="pre">replicas</span></code> number of containers? The following figure illustrates the difference.</p>
<a class="reference internal image-reference" href="../../../../_images/JEP2-Pod-Container.svg"><img alt="../../../../_images/JEP2-Pod-Container.svg" class="align-center" src="../../../../_images/JEP2-Pod-Container.svg" width="60%" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>In the Docker documentation, <code class="docutils literal notranslate"><span class="pre">replicas</span></code> is defined as ‚Äúthe number of containers that should be running at any given time‚Äù. We follow this definition and choose the last interpretation in the figure above. This should offer us more flexibility and consistency with Docker and Kubernetes API.</p>
<p><strong>Each container contains a ``Pea``, not a ``Pod``, therefore a ``Pea`` should provide a CLI with the some additional argument.</strong></p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-replica_id">
<span class="sig-name descname"><span class="pre">replica_id</span></span><a class="headerlink" href="#confval-replica_id" title="Permalink to this definition">#</a></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">Pea</span></code> is always unary, it has no replicas. <code class="docutils literal notranslate"><span class="pre">replicas_id</span></code> represent an integer index that its parent <code class="docutils literal notranslate"><span class="pre">Pod</span></code> assign to it. <code class="docutils literal notranslate"><span class="pre">replica_id</span></code> is defined on the <code class="docutils literal notranslate"><span class="pre">Pea</span></code> level.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-0">
<span class="sig-name descname"><span class="pre">image</span></span><a class="headerlink" href="#confval-0" title="Permalink to this definition">#</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">image</span></code> is defined at the <code class="docutils literal notranslate"><span class="pre">Pod</span></code> level. It describes all non-head and non-tail peas should be running with. If it is specified, then the following code needs to behave differently:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>            <span class="c1"># for thread and process backend which runs locally, host_in and host_out should not be set</span>
<span class="linenos"> 2</span>            <span class="c1"># s.host_in = __default_host__</span>
<span class="linenos"> 3</span>            <span class="c1"># s.host_out = __default_host__</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>    <span class="k">def</span> <span class="nf">start_sentinels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos"> 6</span>        <span class="bp">self</span><span class="o">.</span><span class="n">sentinel_threads</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos"> 7</span>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_args</span><span class="p">,</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_args</span><span class="p">,</span> <span class="s1">&#39;shutdown_idle&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
<span class="linenos"> 8</span>            <span class="bp">self</span><span class="o">.</span><span class="n">sentinel_threads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">close_if_idle</span><span class="p">,</span>
<span class="linenos"> 9</span>                                                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sentinel-shutdown-idle&#39;</span><span class="p">,</span>
<span class="linenos">10</span>                                                <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="linenos">11</span>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentinel_threads</span><span class="p">:</span>
</pre></div>
</div>
</dd></dl>

<p>These lines should start Docker containers with args followed.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Pod</span></code> will inherit these CLI arguments.</p>
</section>
<section id="new-cli-argument">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">New CLI argument</a><a class="headerlink" href="#new-cli-argument" title="Permalink to this heading">#</a></h3>
<p>..confval:: hostname</p>
<blockquote>
<div><p>Useful when the current Pea socket is <code class="docutils literal notranslate"><span class="pre">BIND</span></code> and other Peas <code class="docutils literal notranslate"><span class="pre">CONNECT</span></code> to it,</p>
<ul class="simple">
<li><p>a remote IP address (72.214.121.283), remote</p></li>
<li><p>The DNS name (e.g. encoder-1), local/remote</p></li>
<li><p>0.0.0.0, local</p></li>
<li><p>host.docker.internal, local</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</div></blockquote>
<p>..confval:: remote</p>
<blockquote>
<div><p>To tell if the Pea is running remotely or locally</p>
<dl class="field-list simple">
<dt class="field-odd">type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</div></blockquote>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-1">
<span class="sig-name descname"><span class="pre">image</span></span><a class="headerlink" href="#confval-1" title="Permalink to this definition">#</a></dt>
<dd><p>If set then the Pea is running inside the docker</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Specification</a><a class="headerlink" href="#specification" title="Permalink to this heading">#</a></h2>
<p>If the <code class="docutils literal notranslate"><span class="pre">socket_type</span></code> is BIND, then it is always bind to <code class="docutils literal notranslate"><span class="pre">tcp://0.0.0.0:port</span></code>. The key problem is to determine the <code class="docutils literal notranslate"><span class="pre">host_in</span></code> and <code class="docutils literal notranslate"><span class="pre">host_out</span></code> when the <code class="docutils literal notranslate"><span class="pre">socket_type</span></code> is CONNECT.</p>
<p>Logic when connecting, the Pea that opens a BIND socket is <em>Server</em>, and the Pea connects to it as <em>Client</em>:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>BIND</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>Local</p></td>
<td></td>
<td><p>Remote</p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>Docker</p></td>
<td><p>Host Thread/Process</p></td>
<td><p>Docker</p></td>
<td><p>Host Thread/Process</p></td>
</tr>
<tr class="row-even"><td><p>CONNECT</p></td>
<td><p>Local</p></td>
<td><p>Docker</p></td>
<td><p>host.docker.internal*</p></td>
<td><p>host.docker.internal</p></td>
<td><p>hostname_of_BIND</p></td>
<td><p>hostname_of_BIND</p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>Host Thread/Process</p></td>
<td><p>0.0.0.0</p></td>
<td><p>0.0.0.0</p></td>
<td><p>hostname_of_BIND</p></td>
<td><p>hostname_of_BIND</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Remote</p></td>
<td><p>Docker</p></td>
<td><p>hostname_of_BIND</p></td>
<td><p>hostname_of_BIND</p></td>
<td><p>Same Remote? Then follow local-local</p></td>
<td><p>Different Remote?Then follow remote-local</p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>Host Thread/Process</p></td>
<td><p>hostname_of_BIND</p></td>
<td><p>hostname_of_BIND</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<section id="a-minimum-jina-docker-contianer">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">A minimum Jina Docker Contianer</a><a class="headerlink" href="#a-minimum-jina-docker-contianer" title="Permalink to this heading">#</a></h3>
</section>
</section>
<section id="id2">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">Specification</a><a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h2>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">Backwards Compatibility</a><a class="headerlink" href="#backwards-compatibility" title="Permalink to this heading">#</a></h2>
</section>
</section>

                </article>
            </div>
            <footer>
                
                <div class="related-pages">
                    <a class="next-page" href="../../../RELEASE/">
                        <div class="page-info">
                            <div class="context">
                                <span>Next</span>
                            </div>
                            <div class="title">Release Cycle</div>
                        </div>
                        <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
                    </a>
                    <a class="prev-page" href="../../jep-1/main/">
                        <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
                        <div class="page-info">
                            <div class="context">
                                <span>Previous</span>
                            </div>
                            
                            <div class="title">JEP 1 ‚Äî Redesigning <code class="docutils literal notranslate"><span class="pre">Driver</span></code> and its relation to <code class="docutils literal notranslate"><span class="pre">Executor</span></code></div>
                            
                        </div>
                    </a>
                </div>
                <div class="bottom-of-page">
                    <div class="left-details">
                        <div class="copyright">
                            Copyright &#169; Jina AI Limited. All rights reserved.
                        </div><div class="last-updated">
                            Last updated on Oct 19, 2022</div>
                    </div>
                    <div class="right-details">
                        <div class="social-btns">
                            <a class='social-btn' href="https://github.com/jina-ai/jina" aria-label="GitHub"
                               target="_blank" rel="noreferrer"> <i class="fab fa-github"></i></a>
                            <a class='social-btn' href="https://slack.jina.ai" aria-label="Slack" target="_blank"
                               rel="noreferrer"> <i class="fab fa-slack"></i></a>
                            <a class='social-btn' href="https://youtube.com/c/jina-ai" aria-label="YouTube"
                               target="_blank" rel="noreferrer"> <i class="fab fa-youtube"></i></a>
                            <a class='social-btn' href="https://twitter.com/JinaAI_" aria-label="Twitter"
                               target="_blank" rel="noreferrer"> <i class="fab fa-twitter"></i></a>
                            <a class='social-btn' href="https://www.linkedin.com/company/jinaai/" aria-label="LinkedIn"
                               target="_blank" rel="noreferrer"> <i class="fab fa-linkedin"></i></a>
                        </div>
                    </div>
                </div>
                
            </footer>
        </div>
        <aside class="toc-drawer">
            
            
            <div class="toc-sticky toc-scroll">
                <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
                </div>
                <div class="toc-tree-container">
                    <div class="toc-tree">
                        <ul>
<li><a class="reference internal" href="#">JEP 2 ‚Äî Supporting Docker Container in Flow API</a><ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a><ul>
<li><a class="reference internal" href="#can-we-support-remote-pod-in-the-flow-api">Can we support remote Pod in the Flow API?</a></li>
<li><a class="reference internal" href="#run-pods-in-their-own-container">Run pods in their own container</a></li>
<li><a class="reference internal" href="#new-cli-argument">New CLI argument</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#a-minimum-jina-docker-contianer">A minimum Jina Docker Contianer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">Specification</a></li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
</ul>
</li>
</ul>

                    </div>
                </div>
            </div>
            
            
        </aside>
    </div>
    <qa-bot
            title="Jina Bot"
            description="Build cross-modal and multi-modal applications on the cloud"
    >
        <template>
            <dl>
                <dt>You can ask questions about our docs. Try:</dt>
                <dd>Does Jina support Kubernetes?</dd>
                <dd>What are the basic concepts in Jina?</dd>
                <dd>How to share my Executor?</dd>
            </dl>
        </template>
    </qa-bot>
</div>
<img referrerpolicy="no-referrer-when-downgrade"
     src="https://static.scarf.sh/a.png?x-pxid=2823e771-0e1e-4320-8fde-48bc48e53262"/><script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../_static/scripts/furo.js"></script>
    <script src="../../../../_static/clipboard.min.js"></script>
    <script src="../../../../_static/copybutton.js"></script>
    <script src="../../../../_static/tabs.js"></script>
    <script src="../../../../_static/design-tabs.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() { 
            document.querySelector('qa-bot').setAttribute('server', 'https://jina-ai-jina.docsqa.jina.ai');
        });
        </script>
    <script src="https://cdn.jsdelivr.net/npm/qabot@0.4"></script>
    </body>
</html>