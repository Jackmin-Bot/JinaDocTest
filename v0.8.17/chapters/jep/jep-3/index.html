<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

<meta property="og:title" content="JEP 3 — Adding support for multi-fields search" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://docs.jina.ai/chapters/jep/jep-3/index/" />
  
<meta property="og:site_name" content="Jina 0.8.17 Documentation" />
  
<meta property="og:description" content="Table of Contents: JEP 3 — Adding support for multi-fields search- Abstract, Motivation, Rationale- Modify jina.proto, Adapt Index-Flow Pods, Adapt Query-Flow Pods., Specification, Open Issues.. Author, Nan Wang ( nan.wang@jina.ai),, Created, May. 28, 2020,, Status, Proposal,, Related JEPs,,, Cre..." />
  
<meta property="og:image" content="https://docs.jina.ai/chapters/_images/JEP3-index-design.png" />
  
<meta property="og:image:alt" content="Jina 0.8.17 Documentation" />
  
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@JinaAI_">
<meta name="twitter:creator" content="@JinaAI_">
<meta name="description" content="Build cross-modal and multi-modal applications on the cloud · Neural Search · Creative AI · Cloud Native · MLOps">
<meta property="og:description" content="Build cross-modal and multi-modal applications on the cloud · Neural Search · Creative AI · Cloud Native · MLOps">

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-48ZDWC8GT6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-48ZDWC8GT6');
</script>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    <link rel="index" title="Index" href="../../../genindex/" /><link rel="search" title="Search" href="../../../search/" /><link rel="next" title="Troubleshooting" href="../../troubleshooting/" /><link rel="prev" title="JEP 2 — Supporting Docker Container in Flow API" href="../jep-2/" />
        <link rel="canonical" href="https://docs.jina.ai/chapters/jep/jep-3/index.html" />

    <link rel="shortcut icon" href="../../../_static/favicon.ico"/><meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>JEP 3 — Adding support for multi-fields search - Jina 3.10.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/main.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/docbot.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: #4d4d4d;
  --color-brand-primary: #009191;
  --color-brand-content: #009191;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #FBCB67;
  --color-brand-content: #FBCB67;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
    <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
    <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
    <header class="mobile-header">
        <div class="header-left">
            <label class="nav-overlay-icon" for="__navigation">
                <div class="visually-hidden">Toggle site navigation sidebar</div>
                <i class="icon">
                    <svg>
                        <use href="#svg-menu"></use>
                    </svg>
                </i>
            </label>
        </div>
        <div class="header-center">
            <a href="../../../">
                <div class="brand">Jina 3.10.2 documentation</div>
            </a>
        </div>
        <div class="header-right">
            <div class="theme-toggle-container theme-toggle-header">
                <button class="theme-toggle">
                    <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
                    <svg class="theme-icon-when-auto">
                        <use href="#svg-sun-half"></use>
                    </svg>
                    <svg class="theme-icon-when-dark">
                        <use href="#svg-moon"></use>
                    </svg>
                    <svg class="theme-icon-when-light">
                        <use href="#svg-sun"></use>
                    </svg>
                </button>
            </div>
            <label class="toc-overlay-icon toc-header-icon" for="__toc">
                <div class="visually-hidden">Toggle table of contents sidebar</div>
                <i class="icon">
                    <svg>
                        <use href="#svg-toc"></use>
                    </svg>
                </i>
            </label>
        </div>
    </header>
    <aside class="sidebar-drawer">
        <div class="sidebar-container">
            
            <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../_static/logo-light.svg" alt="Light Logo" />
    <img class="sidebar-logo only-dark" src="../../../_static/logo-dark.svg" alt="Dark Logo" />
  </div>
  
  
</a>
<div class="sd-d-flex-row sd-align-major-spaced">
  <a class="github-button" href="https://github.com/jina-ai/jina" data-icon="octicon-star" data-show-count="true" aria-label="Star jina-ai/jina on GitHub" style="opacity: 0;">Star</a>
  
</div><form class="sidebar-search-container" method="get" action="../../../search/" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
    <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../install/os/">Installation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../install/os/via-pip/">Install Jina via <code class="docutils literal notranslate"><span class="pre">pip</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install/os/via-pip/#upgrade-jina">Upgrade Jina</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install/os/via-docker/">Install Jina via Docker Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install/os/on-rasp-linux/">Install Jina on Raspberry Pi and other Linux Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install/os/on-wsl/">Install Jina on Windows Subsystem for Linux (WSL)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install/os/on-x/">Can I Run Jina On ….?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install/autocomplete/">Autocomplete commands on Bash, Zsh and Fish</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../helloworld/">Jina “Hello, World!” 👋🌍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../101/">Jina 101: First Thing to Learn About Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../flow/">Using Flow API to Compose Your Jina Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../io/">Input and Output Functions in Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli/exit/">Gracefully Exit Jina</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../cli/">Jina Command-Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-helloworld/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">hello-world</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-pod/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">pod</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-flow/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">flow</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-gateway/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">gateway</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-ping/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">ping</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-check/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">check</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-log/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">log</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-pea/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">pea</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/jina-client/"><code class="docutils literal notranslate"><span class="pre">jina</span> <span class="pre">client</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../api/jina/">Jina Python API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.clients/">jina.clients</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.clients.asyncio/">jina.clients.asyncio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.clients.base/">jina.clients.base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.clients.helper/">jina.clients.helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.clients.request/">jina.clients.request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.clients.sugary_io/">jina.clients.sugary_io</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.docker/">jina.docker</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.docker.checker/">jina.docker.checker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.docker.helper/">jina.docker.helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.docker.hubapi/">jina.docker.hubapi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.docker.hubio/">jina.docker.hubio</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.drivers/">jina.drivers</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.drivers.querylang/">jina.drivers.querylang</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.drivers.querylang.queryset/">jina.drivers.querylang.queryset</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.drivers.querylang.queryset.dunderkey/">jina.drivers.querylang.queryset.dunderkey</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.drivers.querylang.queryset.helper/">jina.drivers.querylang.queryset.helper</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.drivers.querylang.queryset.lookup/">jina.drivers.querylang.queryset.lookup</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.drivers.querylang.filter/">jina.drivers.querylang.filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.drivers.querylang.reverse/">jina.drivers.querylang.reverse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.drivers.querylang.select/">jina.drivers.querylang.select</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.drivers.querylang.slice/">jina.drivers.querylang.slice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.drivers.querylang.sort/">jina.drivers.querylang.sort</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.drivers.rank/">jina.drivers.rank</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.drivers.rank.aggregate/">jina.drivers.rank.aggregate</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.cache/">jina.drivers.cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.control/">jina.drivers.control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.convert/">jina.drivers.convert</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.craft/">jina.drivers.craft</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.encode/">jina.drivers.encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.evaluate/">jina.drivers.evaluate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.index/">jina.drivers.index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.multimodal/">jina.drivers.multimodal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.predict/">jina.drivers.predict</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.reduce/">jina.drivers.reduce</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.drivers.search/">jina.drivers.search</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.executors/">jina.executors</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.classifiers/">jina.executors.classifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.crafters/">jina.executors.crafters</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.executors.encoders/">jina.executors.encoders</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.encoders.multimodal/">jina.executors.encoders.multimodal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.encoders.numeric/">jina.executors.encoders.numeric</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.encoders.frameworks/">jina.executors.encoders.frameworks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.encoders.tfserving/">jina.executors.encoders.tfserving</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.executors.evaluators/">jina.executors.evaluators</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.executors.evaluators.embedding/">jina.executors.evaluators.embedding</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.evaluators.embedding.cosine/">jina.executors.evaluators.embedding.cosine</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.evaluators.embedding.euclidean/">jina.executors.evaluators.embedding.euclidean</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.executors.evaluators.rank/">jina.executors.evaluators.rank</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.evaluators.rank.precision/">jina.executors.evaluators.rank.precision</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.evaluators.rank.recall/">jina.executors.evaluators.rank.recall</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.executors.evaluators.text/">jina.executors.evaluators.text</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.executors.evaluators.text.length/">jina.executors.evaluators.text.length</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.evaluators.running_stats/">jina.executors.evaluators.running_stats</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.executors.indexers/">jina.executors.indexers</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.indexers.cache/">jina.executors.indexers.cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.indexers.keyvalue/">jina.executors.indexers.keyvalue</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.executors.indexers.vector/">jina.executors.indexers.vector</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.rankers/">jina.executors.rankers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.clients/">jina.executors.clients</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.compound/">jina.executors.compound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.decorators/">jina.executors.decorators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.devices/">jina.executors.devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.metas/">jina.executors.metas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.executors.requests/">jina.executors.requests</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.flow/">jina.flow</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.flow.asyncio/">jina.flow.asyncio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.flow.base/">jina.flow.base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.flow.builder/">jina.flow.builder</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.helloworld/">jina.helloworld</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.helloworld.components/">jina.helloworld.components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.helloworld.helper/">jina.helloworld.helper</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.jaml/">jina.jaml</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.jaml.parsers/">jina.jaml.parsers</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.jaml.parsers.driver/">jina.jaml.parsers.driver</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.jaml.parsers.driver.legacy/">jina.jaml.parsers.driver.legacy</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.jaml.parsers.executor/">jina.jaml.parsers.executor</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.jaml.parsers.executor.legacy/">jina.jaml.parsers.executor.legacy</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.jaml.parsers.flow/">jina.jaml.parsers.flow</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.jaml.parsers.flow.legacy/">jina.jaml.parsers.flow.legacy</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.jaml.parsers.flow.v1/">jina.jaml.parsers.flow.v1</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.jaml.parsers.base/">jina.jaml.parsers.base</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.jaml.helper/">jina.jaml.helper</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.logging/">jina.logging</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.logging.formatter/">jina.logging.formatter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.logging.logger/">jina.logging.logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.logging.pipe/">jina.logging.pipe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.logging.profile/">jina.logging.profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.logging.sse/">jina.logging.sse</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.peapods/">jina.peapods</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.peapods.peas/">jina.peapods.peas</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.peapods.peas.gateway/">jina.peapods.peas.gateway</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="../../../api/jina.peapods.peas.gateway.grpc/">jina.peapods.peas.gateway.grpc</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../../../api/jina.peapods.peas.gateway.grpc.async_call/">jina.peapods.peas.gateway.grpc.async_call</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.peapods.peas.gateway.rest/">jina.peapods.peas.gateway.rest</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.peapods.peas.headtail/">jina.peapods.peas.headtail</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.peapods.peas.headtail.head/">jina.peapods.peas.headtail.head</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.peapods.peas.headtail.tail/">jina.peapods.peas.headtail.tail</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.peapods.pods/">jina.peapods.pods</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.peapods.pods.flow/">jina.peapods.pods.flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.peapods.pods.gateway/">jina.peapods.pods.gateway</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.peapods.pods.helper/">jina.peapods.pods.helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.peapods.pods.mutable/">jina.peapods.pods.mutable</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.peapods.runtimes/">jina.peapods.runtimes</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.peapods.runtimes.container/">jina.peapods.runtimes.container</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.peapods.runtimes.local/">jina.peapods.runtimes.local</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.peapods.runtimes.remote/">jina.peapods.runtimes.remote</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="../../../api/jina.peapods.runtimes.remote.jinad/">jina.peapods.runtimes.remote.jinad</a><input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" role="switch" type="checkbox"/><label for="toctree-checkbox-33"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../../../api/jina.peapods.runtimes.remote.jinad.api/">jina.peapods.runtimes.remote.jinad.api</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.peapods.runtimes.remote.ssh/">jina.peapods.runtimes.remote.ssh</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.peapods.zmq/">jina.peapods.zmq</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.proto/">jina.proto</a><input class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" role="switch" type="checkbox"/><label for="toctree-checkbox-34"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.proto.jina_pb2/">jina.proto.jina_pb2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.proto.jina_pb2_grpc/">jina.proto.jina_pb2_grpc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.proto.serializer/">jina.proto.serializer</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/jina.types/">jina.types</a><input class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" role="switch" type="checkbox"/><label for="toctree-checkbox-35"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.types.document/">jina.types.document</a><input class="toctree-checkbox" id="toctree-checkbox-36" name="toctree-checkbox-36" role="switch" type="checkbox"/><label for="toctree-checkbox-36"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.types.document.converters/">jina.types.document.converters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.types.document.helper/">jina.types.document.helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.types.document.multimodal/">jina.types.document.multimodal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.types.document.uid/">jina.types.document.uid</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.types.message/">jina.types.message</a><input class="toctree-checkbox" id="toctree-checkbox-37" name="toctree-checkbox-37" role="switch" type="checkbox"/><label for="toctree-checkbox-37"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.types.message.common/">jina.types.message.common</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.types.ndarray/">jina.types.ndarray</a><input class="toctree-checkbox" id="toctree-checkbox-38" name="toctree-checkbox-38" role="switch" type="checkbox"/><label for="toctree-checkbox-38"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.types.ndarray.dense/">jina.types.ndarray.dense</a><input class="toctree-checkbox" id="toctree-checkbox-39" name="toctree-checkbox-39" role="switch" type="checkbox"/><label for="toctree-checkbox-39"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.types.ndarray.dense.numpy/">jina.types.ndarray.dense.numpy</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../api/jina.types.ndarray.sparse/">jina.types.ndarray.sparse</a><input class="toctree-checkbox" id="toctree-checkbox-40" name="toctree-checkbox-40" role="switch" type="checkbox"/><label for="toctree-checkbox-40"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.types.ndarray.sparse.numpy/">jina.types.ndarray.sparse.numpy</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.types.ndarray.sparse.pytorch/">jina.types.ndarray.sparse.pytorch</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.types.ndarray.sparse.scipy/">jina.types.ndarray.sparse.scipy</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../api/jina.types.ndarray.sparse.tensorflow/">jina.types.ndarray.sparse.tensorflow</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.types.ndarray.generic/">jina.types.ndarray.generic</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.types.querylang/">jina.types.querylang</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.types.request/">jina.types.request</a><input class="toctree-checkbox" id="toctree-checkbox-41" name="toctree-checkbox-41" role="switch" type="checkbox"/><label for="toctree-checkbox-41"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.types.request.common/">jina.types.request.common</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/jina.types.score/">jina.types.score</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../api/jina.types.sets/">jina.types.sets</a><input class="toctree-checkbox" id="toctree-checkbox-42" name="toctree-checkbox-42" role="switch" type="checkbox"/><label for="toctree-checkbox-42"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.types.sets.chunk/">jina.types.sets.chunk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.types.sets.document/">jina.types.sets.document</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.types.sets.match/">jina.types.sets.match</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/jina.types.sets.querylang/">jina.types.sets.querylang</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/jina.checker/">jina.checker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/jina.enums/">jina.enums</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/jina.excepts/">jina.excepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/jina.helper/">jina.helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/jina.importer/">jina.importer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/jina.parser/">jina.parser</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../yaml/yaml/">Jina YAML Syntax Reference</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../proto/">Jina Protobuf Specification</a><input class="toctree-checkbox" id="toctree-checkbox-43" name="toctree-checkbox-43" role="switch" type="checkbox"/><label for="toctree-checkbox-43"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../proto/modify/">Update Protocol Specification</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Usages</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../traversal/">Understand Jina Recursive Document Representation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../flow/pattern/">Common Design Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cross-multi-modality/">Multi &amp; Cross Modality</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../hub/">Using Jina Pod with Docker Container</a><input class="toctree-checkbox" id="toctree-checkbox-44" name="toctree-checkbox-44" role="switch" type="checkbox"/><label for="toctree-checkbox-44"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../hub/build-pod-image/">Build Your Pod into a Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hub/use-your-pod/">Use Your Pod Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hub/publish-your-pod-image/">Publish Your Pod Image to Jina Hub</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../remote/">Using Jina Pod Remotely</a><input class="toctree-checkbox" id="toctree-checkbox-45" name="toctree-checkbox-45" role="switch" type="checkbox"/><label for="toctree-checkbox-45"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../remote/run-remote-pod-console/">Creating a Remote Jina Pod from Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../remote/run-remote-pod-jina/">Creating a Remote Jina Pod via Jina Gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../remote/run-remote-pod-flow/">Creating a Remote Jina Pod via Flow API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../logging/">Logging configuration in jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dashboard/">Using Dashboard to Monitor Logs and View Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_exec/">Built-in Simple Executors and Reserved <code class="docutils literal notranslate"><span class="pre">uses</span></code> in Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../restapi/">Jina REST API Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../envs/">OS Environment Variables Used in Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../prevent_duplicate_indexing/">Prevent Indexing Duplicates</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extensions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../extend/executor/">Guideline When Adding New Executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extend/mwu/">A Minimum Working Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extend/driver/">Guideline When Adding New Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hub/publish-your-pod-image/">Publish Your Pod Image to Jina Hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_schema/">Jina API Schema for 3rd-Party Applications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING/">Contributing to Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING/#join-us-on-slack">Join Us on Slack!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../RELEASE/">Release Cycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CHANGELOG/">Change Logs</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../">Jina Enhancement Proposals (JEP)</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-46" name="toctree-checkbox-46" role="switch" type="checkbox"/><label for="toctree-checkbox-46"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../jep-1/">JEP 1 — Redesigning <code class="docutils literal notranslate"><span class="pre">Driver</span></code> and its relation to <code class="docutils literal notranslate"><span class="pre">Executor</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../jep-2/">JEP 2 — Supporting Docker Container in Flow API</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">JEP 3 — Adding support for multi-fields search</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/dev/">FAQ for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/user/">FAQ for End-Users</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Indices and Tables</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../all_exec/">List of 100 Executors in Jina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../all_driver/">List of 60 Drivers in Jina</a></li>
</ul>

    <p class="caption" role="heading"><span class="caption-text">Ecosystem</span></p>
    <ul>
        <li class="toctree-l1">
            <a class="reference internal" href="#">
                <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/search-light.svg">
                <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/search-dark.svg">
                Jina</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://hub.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/hub-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/hub-dark.svg">
            Jina Hub</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://finetuner.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/finetuner-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/finetuner-dark.svg">
            Finetuner</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://docarray.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/docarray-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/docarray-dark.svg">
            DocArray</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://clip-as-service.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/cas-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/cas-dark.svg">
            CLIP-as-service</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://github.com/jina-ai/jcloud">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/JCloud-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/JCloud-dark.svg">
            JCloud</a></li>
        <li class="toctree-l1"><a class="reference external" href="https://now.jina.ai">
            <img class="sidebar-ecosys-logo only-light-line" src="../../../_static/now-light.svg">
            <img class="sidebar-ecosys-logo only-dark-line" src="../../../_static/now-dark.svg">
            NOW</a></li>
    </ul>
</div>

</div>

            </div>
            
        </div>
    </aside>
    <div class="main">
        <div class="content">
            <div class="article-container">
                <a href="#" class="back-to-top muted-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
                    </svg>
                    <span>Back to top</span>
                </a>
                <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
                        <button class="theme-toggle">
                            <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
                            <svg class="theme-icon-when-auto">
                                <use href="#svg-sun-half"></use>
                            </svg>
                            <svg class="theme-icon-when-dark">
                                <use href="#svg-moon"></use>
                            </svg>
                            <svg class="theme-icon-when-light">
                                <use href="#svg-sun"></use>
                            </svg>
                        </button>
                    </div>
                    <label class="toc-overlay-icon toc-content-icon"
                           for="__toc">
                        <div class="visually-hidden">Toggle table of contents sidebar</div>
                        <i class="icon">
                            <svg>
                                <use href="#svg-toc"></use>
                            </svg>
                        </i>
                    </label>
                </div>
                <article role="main">
                    <section id="jep-3-adding-support-for-multi-fields-search">
<h1><a class="toc-backref" href="#id11" role="doc-backlink">JEP 3 — Adding support for multi-fields search</a><a class="headerlink" href="#jep-3-adding-support-for-multi-fields-search" title="Permalink to this heading">#</a></h1>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#jep-3-adding-support-for-multi-fields-search" id="id2">JEP 3 — Adding support for multi-fields search</a></p>
<ul>
<li><p><a class="reference internal" href="#abstract" id="id3">Abstract</a></p></li>
<li><p><a class="reference internal" href="#motivation" id="id4">Motivation</a></p></li>
<li><p><a class="reference internal" href="#rationale" id="id5">Rationale</a></p>
<ul>
<li><p><a class="reference internal" href="#modify-jina-proto" id="id6">Modify <code class="docutils literal notranslate"><span class="pre">jina.proto</span></code></a></p></li>
<li><p><a class="reference internal" href="#adapt-index-flow-pods" id="id7">Adapt Index-Flow Pods</a></p></li>
<li><p><a class="reference internal" href="#adapt-query-flow-pods" id="id8">Adapt Query-Flow Pods</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#specification" id="id9">Specification</a></p></li>
<li><p><a class="reference internal" href="#open-issues" id="id10">Open Issues</a></p></li>
</ul>
</li>
</ul>
</nav>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Nan Wang (<a class="reference external" href="mailto:nan&#46;wang&#37;&#52;&#48;jina&#46;ai">nan<span>&#46;</span>wang<span>&#64;</span>jina<span>&#46;</span>ai</a>)</p>
</dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even"><p>May. 28, 2020</p>
</dd>
<dt class="field-odd">Status<span class="colon">:</span></dt>
<dd class="field-odd"><p>Proposal</p>
</dd>
<dt class="field-even">Related JEPs<span class="colon">:</span></dt>
<dd class="field-even"><p></p></dd>
<dt class="field-odd">Created on Jina VCS version<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">TBA</span></code></p>
</dd>
<dt class="field-even">Merged to Jina VCS version<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">TBA</span></code></p>
</dd>
<dt class="field-odd">Released in Jina version<span class="colon">:</span></dt>
<dd class="field-odd"><p>TBA</p>
</dd>
<dt class="field-even">Discussions<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://github.com/jina-ai/jina/issues/441">https://github.com/jina-ai/jina/issues/441</a></p>
</dd>
</dl>
<nav class="contents" id="id1">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#jep-3-adding-support-for-multi-fields-search" id="id11">JEP 3 — Adding support for multi-fields search</a></p>
<ul>
<li><p><a class="reference internal" href="#abstract" id="id12">Abstract</a></p></li>
<li><p><a class="reference internal" href="#motivation" id="id13">Motivation</a></p></li>
<li><p><a class="reference internal" href="#rationale" id="id14">Rationale</a></p></li>
<li><p><a class="reference internal" href="#specification" id="id15">Specification</a></p></li>
<li><p><a class="reference internal" href="#open-issues" id="id16">Open Issues</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="abstract">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this heading">#</a></h2>
<p>We propose a way to implement the multi-field search in Jina.</p>
</section>
<section id="motivation">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Motivation</a><a class="headerlink" href="#motivation" title="Permalink to this heading">#</a></h2>
<p>The Multi-field search is commonly used in practice. Concretely,</p>
<blockquote class="highlights">
<div><p>as a user, I want to limit the query within some selected fields.</p>
</div></blockquote>
<p>In the following use case, there are two documents and three two fields in each of them, i.e. <cite>title</cite> and <cite>summary</cite>.
The user wants to query <code class="docutils literal notranslate"><span class="pre">painter</span></code> but <strong>only</strong> from the <cite>title</cite> field. The expected result will be <cite>{‘doc_id’: 11, ‘title’: ‘hackers and painters’}</cite>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;doc_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the story of the art&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;This is a book about the history of the art, and the stories of the great painters&quot;</span><span class="w"></span>
<span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;doc_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hackers and painters&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;This book discusses hacking, start-up companies, and many other technological issues&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Rationale</a><a class="headerlink" href="#rationale" title="Permalink to this heading">#</a></h2>
<p>The core issue of this use case is the need of marking the <code class="docutils literal notranslate"><span class="pre">Chunks</span></code> from different fields.
During the query time,
the user should be able to change the selected fields in different queries <strong>without rebuilding the query</strong> <code class="docutils literal notranslate"><span class="pre">Flow</span></code>.</p>
<section id="modify-jina-proto">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Modify <code class="docutils literal notranslate"><span class="pre">jina.proto</span></code></a><a class="headerlink" href="#modify-jina-proto" title="Permalink to this heading">#</a></h3>
<p>Let’s take the following <code class="docutils literal notranslate"><span class="pre">Flow</span></code> as an example.
The <code class="docutils literal notranslate"><span class="pre">FieldsMapper</span></code> is a <code class="docutils literal notranslate"><span class="pre">Crafter</span></code> that split each <code class="docutils literal notranslate"><span class="pre">Document</span></code> into fields and add the  <code class="docutils literal notranslate"><span class="pre">field_name</span></code> information for <code class="docutils literal notranslate"><span class="pre">Chunks</span></code>.
Afterwards, the <code class="docutils literal notranslate"><span class="pre">Chunks</span></code> containing the <cite>title</cite> and the <cite>summary</cite> information are processed differently in two pathways and stored seperately.</p>
<a class="reference internal image-reference" href="../../../_images/JEP3-index-design.png"><img alt="../../../_images/JEP3-index-design.png" class="align-center" src="../../../_images/JEP3-index-design.png" style="width: 60%;" /></a>
<p>To add the field information into <code class="docutils literal notranslate"><span class="pre">Chunks</span></code>, we need first add new fields in the protobuf defination.
At the <code class="docutils literal notranslate"><span class="pre">Chunk</span></code> level, one new field, namely <code class="docutils literal notranslate"><span class="pre">field_name</span></code>, is required to denote the field information of the <code class="docutils literal notranslate"><span class="pre">Chunk</span></code>.
Each <code class="docutils literal notranslate"><span class="pre">Document</span></code> have one or more fields, and each field can be further splitted into one or more <code class="docutils literal notranslate"><span class="pre">Chunks</span></code>.
In other words, each <code class="docutils literal notranslate"><span class="pre">Chunk</span></code> can <strong>only</strong> be assigned to one field, but each field contains one or more <code class="docutils literal notranslate"><span class="pre">Chunks</span></code>.</p>
<blockquote class="highlights">
<div><p>The concept of <cite>field</cite> can be considered as a group of <code class="docutils literal notranslate"><span class="pre">Chunks</span></code>.</p>
</div></blockquote>
<p>Secondly, at the <code class="docutils literal notranslate"><span class="pre">Request</span></code> level, we will add another new field, namely <code class="docutils literal notranslate"><span class="pre">filter_by</span></code>, for the <code class="docutils literal notranslate"><span class="pre">SearchRequest</span></code>.
This is used to store the information of on which fields the user wants to query.
By adding this information, the users can specify different fields to query in each search request.</p>
</section>
<section id="adapt-index-flow-pods">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Adapt Index-Flow Pods</a><a class="headerlink" href="#adapt-index-flow-pods" title="Permalink to this heading">#</a></h3>
<p>During index time, most parts of the <code class="docutils literal notranslate"><span class="pre">Flow</span></code> stay the same as before.</p>
<p>To make the <code class="docutils literal notranslate"><span class="pre">Encoder</span></code> only encode the <code class="docutils literal notranslate"><span class="pre">Chunks</span></code> whose <code class="docutils literal notranslate"><span class="pre">field_name</span></code> meet the selected fields, a new argument, <code class="docutils literal notranslate"><span class="pre">filter_by</span></code>, is introduced to specify which fields will be encoded.
To do so, we need adapt <code class="docutils literal notranslate"><span class="pre">EncodeDriver</span></code> and the <code class="docutils literal notranslate"><span class="pre">extract_docs()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">extract_docs</span><span class="p">(</span>
        <span class="n">docs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="s1">&#39;jina_pb2.Document&#39;</span><span class="p">],</span>
        <span class="n">filter_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">embedding</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param filter_by: a list of service names to wait</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EncodeDriver</span><span class="p">(</span><span class="n">BaseEncodeDriver</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filter_by</span> <span class="o">=</span> <span class="n">filter_by</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">filter_by</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_by</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;SearchRequest&#39;</span><span class="p">:</span>
            <span class="n">filter_by</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">req</span><span class="o">.</span><span class="n">filter_by</span>
        <span class="n">contents</span><span class="p">,</span> <span class="n">chunk_pts</span><span class="p">,</span> <span class="n">no_chunk_docs</span><span class="p">,</span> <span class="n">bad_chunk_ids</span> <span class="o">=</span> \
            <span class="n">extract_docs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">req</span><span class="o">.</span><span class="n">docs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_by</span><span class="p">,</span> <span class="n">embedding</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to make the <code class="docutils literal notranslate"><span class="pre">Indexer</span></code> only index the <code class="docutils literal notranslate"><span class="pre">Chunks</span></code> whose <code class="docutils literal notranslate"><span class="pre">field_name</span></code> meet the selected fields, we need to adapt the <code class="docutils literal notranslate"><span class="pre">VectorIndexDriver</span></code> as well.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">VectorIndexDriver</span><span class="p">(</span><span class="n">BaseIndexDriver</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filter_by</span> <span class="o">=</span> <span class="n">filter_by</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">embed_vecs</span><span class="p">,</span> <span class="n">chunk_pts</span><span class="p">,</span> <span class="n">no_chunk_docs</span><span class="p">,</span> <span class="n">bad_chunk_ids</span> <span class="o">=</span> \
            <span class="n">extract_docs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">req</span><span class="o">.</span><span class="n">docs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_by</span><span class="p">,</span> <span class="n">embedding</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The same change goes for the <code class="docutils literal notranslate"><span class="pre">ChunkKVIndexDriver</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ChunkKVIndexDriver</span><span class="p">(</span><span class="n">KVIndexDriver</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;chunk&#39;</span><span class="p">,</span> <span class="n">filter_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filter_by</span> <span class="o">=</span> <span class="n">filter_by</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_by</span> <span class="k">else</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">google.protobuf.json_format</span> <span class="kn">import</span> <span class="n">MessageToJson</span>
        <span class="n">content</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sa">f</span><span class="s1">&#39;c</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">chunk_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">:</span> <span class="n">MessageToJson</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">req</span><span class="o">.</span><span class="n">docs</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">chunks</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_by</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_by</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">content</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exec_fn</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="adapt-query-flow-pods">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Adapt Query-Flow Pods</a><a class="headerlink" href="#adapt-query-flow-pods" title="Permalink to this heading">#</a></h3>
<p>During the query time,
Moreover, we need to refactor the <code class="docutils literal notranslate"><span class="pre">BasePea</span></code> so that the <code class="docutils literal notranslate"><span class="pre">Pea</span></code> gets the information of how many incoming messages are expected.
The expected number of incoming messages will change from query to query because the user will select different fields with the <code class="docutils literal notranslate"><span class="pre">filter_by</span></code> argument.
In the current version (v.0.1.15), this information is fixed and stored in <code class="docutils literal notranslate"><span class="pre">self.args.num_parts</span></code> when the graph is built.
And the <code class="docutils literal notranslate"><span class="pre">Pea</span></code> will <strong>NOT</strong> start processing the data until the expected number of incoming messages arrive.
In order to make the <code class="docutils literal notranslate"><span class="pre">Pea</span></code> handle the varying number of incoming messages, we need to make the expected number adjustable on the fly for each query.
Note that the <code class="docutils literal notranslate"><span class="pre">self.args.num_parts</span></code> is the upper bound of the expected number of incoming messages.
Thereafter, it is reasonable to set the expected number of incoming messages as following,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">num_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">num_part</span>
<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_type</span> <span class="o">==</span> <span class="s1">&#39;SearchRequest&#39;</span><span class="p">:</span>
    <span class="c1"># modify the num_part on the fly for SearchRequest</span>
    <span class="n">num_part</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">num_part</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">filtered_by</span><span class="p">),</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<p>Furthermore, the <code class="docutils literal notranslate"><span class="pre">VectorSearchDriver</span></code> and the <code class="docutils literal notranslate"><span class="pre">KVSearchDriver</span></code> also need to be adapted accordingly in order to <strong>only</strong> process the <code class="docutils literal notranslate"><span class="pre">Chunks</span></code> meet the <code class="docutils literal notranslate"><span class="pre">filter_by</span></code> requirement.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">VectorSearchDriver</span><span class="p">(</span><span class="n">BaseSearchDriver</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">embed_vecs</span><span class="p">,</span> <span class="n">chunk_pts</span><span class="p">,</span> <span class="n">no_chunk_docs</span><span class="p">,</span> <span class="n">bad_chunk_ids</span> <span class="o">=</span> \
            <span class="n">extract_docs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">req</span><span class="o">.</span><span class="n">docs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">req</span><span class="o">.</span><span class="n">filter_by</span><span class="p">,</span> <span class="n">embedding</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="o">...</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">KVSearchDriver</span><span class="p">(</span><span class="n">BaseSearchDriver</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="o">...</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">==</span> <span class="s1">&#39;chunk&#39;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">req</span><span class="o">.</span><span class="n">docs</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">chunks</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">req</span><span class="o">.</span><span class="n">filter_by</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="o">...</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">req</span><span class="o">.</span><span class="n">docs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_topk_docs</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">chunks</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">req</span><span class="o">.</span><span class="n">filter_by</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="o">...</span>
        <span class="o">...</span>
</pre></div>
</div>
</section>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Specification</a><a class="headerlink" href="#specification" title="Permalink to this heading">#</a></h2>
<p>For the use case above, the <cite>index.yml</cite> will be defined as following,</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="kt">!Flow</span><span class="w"></span>
<span class="nt">pods</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">fields_mapper</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mapper.yml</span><span class="w"></span>
<span class="w">  </span><span class="nt">title_encoder</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">title_encoder.yml</span><span class="w"></span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fields_mapper</span><span class="w"></span>
<span class="w">  </span><span class="nt">sum_encoder</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sum_encoder.yml</span><span class="w"></span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fields_mapper</span><span class="w"></span>
<span class="w">  </span><span class="nt">title_indexer</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">title_indexer.yml</span><span class="w"></span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">title_encoder</span><span class="w"></span>
<span class="w">  </span><span class="nt">sum_indexer</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sum_indexer.yml</span><span class="w"></span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sum_encoder</span><span class="w"></span>
<span class="w">  </span><span class="nt">join</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">title_indexer</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sum_indexer</span><span class="w"></span>
</pre></div>
</div>
<p>And the <cite>mapper.yml</cite> will be defined as below,</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="kt">!FilterMapper</span><span class="w"></span>
<span class="nt">requests</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">on</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">[</span><span class="nv">SearchRequest</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">IndexRequest</span><span class="p p-Indicator">]:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!MapperDriver</span><span class="w"></span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">craft</span><span class="w"></span>
<span class="w">          </span><span class="nt">mapping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&#39;title&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;title&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;summary&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;summ&#39;</span><span class="p p-Indicator">}</span><span class="w"></span>
</pre></div>
</div>
<p>The <cite>sum_encoder.yml</cite> is as below,</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="kt">!AnotherTextEncoder</span><span class="w"></span>
<span class="nt">requests</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">on</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">[</span><span class="nv">SearchRequest</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">IndexRequest</span><span class="p p-Indicator">]:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!EncodeDriver</span><span class="w"></span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">encode</span><span class="w"></span>
<span class="w">          </span><span class="nt">filter_by</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summ</span><span class="w"></span>
</pre></div>
</div>
<p>The <cite>sum_indexer.yml</cite> is as below,</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="kt">!ChunkIndexer</span><span class="w"></span>
<span class="nt">components</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!NumpyIndexer</span><span class="w"></span>
<span class="w">    </span><span class="nt">with</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">index_filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vec.gz</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!BasePbIndexer</span><span class="w"></span>
<span class="w">    </span><span class="nt">with</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">index_filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">chunk.gz</span><span class="w"></span>
<span class="nt">requests</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">on</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">IndexRequest</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!VectorIndexDriver</span><span class="w"></span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">executor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NumpyIndexer</span><span class="w"></span>
<span class="w">          </span><span class="nt">filter_by</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summ</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!PruneDriver</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!KVIndexDriver</span><span class="w"></span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">executor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BasePbIndexer</span><span class="w"></span>
<span class="w">          </span><span class="nt">filter_by</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summ</span><span class="w"></span>
<span class="w">    </span><span class="nt">SearchRequest</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!VectorSearchDriver</span><span class="w"></span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">executor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NumpyIndexer</span><span class="w"></span>
<span class="w">          </span><span class="nt">filter_by</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summ</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!PruneDriver</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!KVSearchDriver</span><span class="w"></span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">executor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BasePbIndexer</span><span class="w"></span>
<span class="w">          </span><span class="nt">filter_by</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summ</span><span class="w"></span>
</pre></div>
</div>
<p>To send the request, one can specify the <cite>filter_by</cite> argument as below,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">flow</span><span class="o">.</span><span class="n">build</span><span class="p">()</span> <span class="k">as</span> <span class="n">fl</span><span class="p">:</span>
    <span class="n">fl</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">read_data_fn</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">call_back_fn</span><span class="p">,</span> <span class="n">filter_by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,])</span>
</pre></div>
</div>
</section>
<section id="open-issues">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Open Issues</a><a class="headerlink" href="#open-issues" title="Permalink to this heading">#</a></h2>
<p>This use case can be further extened to the multi-modality search by extending the <code class="docutils literal notranslate"><span class="pre">filter_by</span></code> to accepting the <code class="docutils literal notranslate"><span class="pre">mimitype</span></code>.</p>
</section>
</section>

                </article>
            </div>
            <footer>
                
                <div class="related-pages">
                    <a class="next-page" href="../../troubleshooting/">
                        <div class="page-info">
                            <div class="context">
                                <span>Next</span>
                            </div>
                            <div class="title">Troubleshooting</div>
                        </div>
                        <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
                    </a>
                    <a class="prev-page" href="../jep-2/">
                        <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
                        <div class="page-info">
                            <div class="context">
                                <span>Previous</span>
                            </div>
                            
                            <div class="title">JEP 2 — Supporting Docker Container in Flow API</div>
                            
                        </div>
                    </a>
                </div>
                <div class="bottom-of-page">
                    <div class="left-details">
                        <div class="copyright">
                            Copyright &#169; Jina AI Limited. All rights reserved.
                        </div><div class="last-updated">
                            Last updated on Oct 19, 2022</div>
                    </div>
                    <div class="right-details">
                        <div class="social-btns">
                            <a class='social-btn' href="https://github.com/jina-ai/jina" aria-label="GitHub"
                               target="_blank" rel="noreferrer"> <i class="fab fa-github"></i></a>
                            <a class='social-btn' href="https://slack.jina.ai" aria-label="Slack" target="_blank"
                               rel="noreferrer"> <i class="fab fa-slack"></i></a>
                            <a class='social-btn' href="https://youtube.com/c/jina-ai" aria-label="YouTube"
                               target="_blank" rel="noreferrer"> <i class="fab fa-youtube"></i></a>
                            <a class='social-btn' href="https://twitter.com/JinaAI_" aria-label="Twitter"
                               target="_blank" rel="noreferrer"> <i class="fab fa-twitter"></i></a>
                            <a class='social-btn' href="https://www.linkedin.com/company/jinaai/" aria-label="LinkedIn"
                               target="_blank" rel="noreferrer"> <i class="fab fa-linkedin"></i></a>
                        </div>
                    </div>
                </div>
                
            </footer>
        </div>
        <aside class="toc-drawer">
            
            
            <div class="toc-sticky toc-scroll">
                <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
                </div>
                <div class="toc-tree-container">
                    <div class="toc-tree">
                        <ul>
<li><a class="reference internal" href="#">JEP 3 — Adding support for multi-fields search</a><ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a><ul>
<li><a class="reference internal" href="#modify-jina-proto">Modify <code class="docutils literal notranslate"><span class="pre">jina.proto</span></code></a></li>
<li><a class="reference internal" href="#adapt-index-flow-pods">Adapt Index-Flow Pods</a></li>
<li><a class="reference internal" href="#adapt-query-flow-pods">Adapt Query-Flow Pods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#open-issues">Open Issues</a></li>
</ul>
</li>
</ul>

                    </div>
                </div>
            </div>
            
            
        </aside>
    </div>
    <qa-bot
            title="Jina Bot"
            description="Build cross-modal and multi-modal applications on the cloud"
    >
        <template>
            <dl>
                <dt>You can ask questions about our docs. Try:</dt>
                <dd>Does Jina support Kubernetes?</dd>
                <dd>What are the basic concepts in Jina?</dd>
                <dd>How to share my Executor?</dd>
            </dl>
        </template>
    </qa-bot>
</div>
<img referrerpolicy="no-referrer-when-downgrade"
     src="https://static.scarf.sh/a.png?x-pxid=2823e771-0e1e-4320-8fde-48bc48e53262"/><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/tabs.js"></script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() { 
            document.querySelector('qa-bot').setAttribute('server', 'https://jina-ai-jina.docsqa.jina.ai');
        });
        </script>
    <script src="https://cdn.jsdelivr.net/npm/qabot@0.4"></script>
    </body>
</html>